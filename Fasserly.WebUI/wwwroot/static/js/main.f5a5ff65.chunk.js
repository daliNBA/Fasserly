(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{362:function(e,t,n){},586:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Kn}));var i=n(1),r=n(0),a=n(23),o=n.n(a),c=n(32),s=(n(362),n(610)),l=n(340),u=n(168),b=n(606),j=n(589),d=n(79),p=n(344),h=n(20),g=n(25),O=[{key:"All",text:"All development",value:"0.0"},{key:"Web",text:"Web",value:"Web"},{key:"Game",text:"Game",value:"Game"},{key:"Mobil",text:"Mobil",value:"Mobil"},{key:"WebC",text:"Conception Web",value:"WebC"},{key:"Graphic",text:"Graphic Conception",value:"Graphic"},{key:"Animation",text:"Animation",value:"Animation"},{key:"3D",text:"3D",value:"3D"},{key:"Finance",text:"Finance",value:"Finance"},{key:"Entrepreneurship",text:"Entrepreneurship",value:"Entrepreneurship"},{key:"Gestion",text:"Gestion",value:"Gestion"}],f=n(51),m=n(18),x=n.n(m),y=n(28),v=n(343),w=n(10),C=n(126),k=n(9),R=(n(152),n(6)),T=n(75),P=n.n(T),I=n(27);P.a.defaults.baseURL="/api",P.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),P.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.messagge||e.response||I.b.error("Network error - make sure API is running!");var t=e.response,n=t.data,i=t.status,r=t.config,a=t.headers;throw e.response||I.b.error("Network error - Please check your connection "),404===i&&Kn.push("/notfound"),401===i&&a["www-authenticate"].startsWith('Bearer error="invalid_token"')&&(window.localStorage.removeItem("jwt"),Kn.push("/"),I.b.info("Your session is expired, please login again")),400===i&&"get"===r.method&&n.errors.hasOwnProperty("id")&&Kn.push("/notfound"),500===i&&I.b.error("server error - check the terminal for more info!"),e.response}));var z,S,L,D,M,F,B,A,E,N,U,G,_,H,V,q,Y,W,J,K,$,Q,X,Z,ee,te,ne,ie,re,ae,oe,ce,se,le,ue,be,je,de,pe,he,ge,Oe,fe,me,xe,ye,ve,we,Ce,ke,Re,Te,Pe,Ie,ze,Se,Le,De,Me,Fe,Be,Ae,Ee,Ne,Ue,Ge=function(e){return e.data},_e=function(e){return P.a.get(e).then(Ge)},He=function(e,t){return P.a.post(e,t).then(Ge)},Ve=function(e,t){return P.a.put(e,t).then(Ge)},qe=function(e){return P.a.delete(e).then(Ge)},Ye=function(e,t){var n=new FormData;return n.append("File",t),P.a.post(e,n,{headers:{"content-type":"multipart/form-data"}}).then(Ge)},We={list:function(e){return P.a.get("/training",{params:e}).then(Ge)},details:function(e){return _e("/training/".concat(e))},create:function(e){return He("/training",e)},update:function(e){return Ve("/training/".concat(e.trainingId),e)},delete:function(e){return qe("/training/".concat(e))},buy:function(e){return He("/training/".concat(e,"/buy"),{})},refund:function(e){return qe("/training/".concat(e,"/buy"))}},Je={current:function(){return _e("/user")},login:function(e){return He("/user/login",e)},register:function(e){return He("/user/register",e)},fbLogin:function(e){return He("/user/facebook",{accessToken:e})},refreshToken:function(){return He("/user/refreshToken",{})},verifyEmail:function(e,t){return He("user/verfiyEmail",{token:e,email:t})},resendEmailConfirm:function(e){return _e("/user/resendEmailVerification?email=".concat(e))}},Ke={get:function(e){return _e("/profile/".concat(e))},uploadPhoto:function(e){return Ye("/photo",e)},setMainPhoto:function(e){return He("/photo/".concat(e,"/setmain"),{})},deletePhoto:function(e){return qe("/photo/".concat(e))},editProfile:function(e){return Ve("/profile",e)},follow:function(e){return He("/profile/".concat(e,"/follow"),{})},unfollow:function(e){return qe("/profile/".concat(e,"/follow"))},listFollowings:function(e,t){return _e("/profile/".concat(e,"/follow?predicate=").concat(t))},listTrainings:function(e,t){return _e("/profile/".concat(e,"/trainings?predicate=").concat(t))}},$e=function(e,t,n){return e.dateOfCreation=new Date(e.dateOfCreation),n&&(e.isBuyer=e.buyers.some((function(e){return e.username===t.username})),e.isOwner=e.buyers.some((function(e){return e.username===t.username&&e.isOwner}))),e},Qe=function(e){return{displayName:e.displayName,isOwner:!1,username:e.username,image:e.image}},Xe=n(257),Ze=(z=R.g.ref,S=function(){function e(t){var n=this;Object(f.a)(this,e),this._baseRepository=void 0,Object(w.a)(this,"training",L,this),Object(w.a)(this,"loading",D,this),Object(w.a)(this,"submitting",M,this),Object(w.a)(this,"trainingRegestry",F,this),Object(w.a)(this,"target",B,this),Object(w.a)(this,"loadingBuy",A,this),Object(w.a)(this,"hubConnection",E,this),Object(w.a)(this,"trainingCount",N,this),Object(w.a)(this,"page",U,this),Object(w.a)(this,"predicate",G,this),Object(w.a)(this,"setPredicate",_,this),Object(w.a)(this,"setPage",H,this),Object(w.a)(this,"createHubConnection",V,this),Object(w.a)(this,"stopHubConnection",q,this),Object(w.a)(this,"addcomment",Y,this),Object(w.a)(this,"loadTrainings",W,this),Object(w.a)(this,"createTraining",J,this),Object(w.a)(this,"editTraining",K,this),Object(w.a)(this,"deleteTraining",$,this),Object(w.a)(this,"loadTraining",Q,this),Object(w.a)(this,"buyTraining",X,this),Object(w.a)(this,"refundTraining",Z,this),Object(w.a)(this,"getTraining",ee,this),Object(w.a)(this,"selectTraining",te,this),Object(w.a)(this,"clearTraining",ne,this),this._baseRepository=t,Object(R.h)((function(){return n.predicate.keys()}),(function(){n.page=0,n.trainingRegestry.clear(),n.loadTrainings()}))}return Object(C.a)(e,[{key:"sortByDate",value:function(e){var t=e.sort((function(e,t){return e.dateOfCreation.getDate()-t.dateOfCreation.getDate()}));return Object.entries(t.reduce((function(e,t){var n=t.dateOfCreation.toISOString().split("T")[0];return e[n]=e[n]?[].concat(Object(v.a)(e[n]),[t]):[t],e}),{}))}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)})),e}},{key:"trainingByDate",get:function(){return this.sortByDate(Array.from(this.trainingRegestry.values()))}},{key:"totalPages",get:function(){return Math.ceil(this.trainingCount/2)}}]),e}(),L=Object(k.a)(S.prototype,"training",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=Object(k.a)(S.prototype,"loading",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=Object(k.a)(S.prototype,"submitting",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(k.a)(S.prototype,"trainingRegestry",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),B=Object(k.a)(S.prototype,"target",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=Object(k.a)(S.prototype,"loadingBuy",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=Object(k.a)(S.prototype,"hubConnection",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(k.a)(S.prototype,"trainingCount",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Object(k.a)(S.prototype,"page",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Object(k.a)(S.prototype,"predicate",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),_=Object(k.a)(S.prototype,"setPredicate",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(k.a)(S.prototype,"axiosParams",[R.c],Object.getOwnPropertyDescriptor(S.prototype,"axiosParams"),S.prototype),Object(k.a)(S.prototype,"trainingByDate",[R.c],Object.getOwnPropertyDescriptor(S.prototype,"trainingByDate"),S.prototype),Object(k.a)(S.prototype,"totalPages",[R.c],Object.getOwnPropertyDescriptor(S.prototype,"totalPages"),S.prototype),H=Object(k.a)(S.prototype,"setPage",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),V=Object(k.a)(S.prototype,"createHubConnection",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new Xe.a).withUrl("/chat",{accessTokenFactory:function(){return e._baseRepository.commonRepository.token}}).configureLogging(Xe.b.Information).build(),e.hubConnection.start().then((function(){return console.log(e.hubConnection.state)})).then((function(){console.log("Attempting to join group"),e.hubConnection.invoke("AddToGroup",t)})).catch((function(e){return console.log("Error estabilshed connection",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(R.i)((function(){e.training.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){I.b.info(e)}))}}}),q=Object(k.a)(S.prototype,"stopHubConnection",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.hubConnection.invoke("RemoveFromGroup",null===(t=e.training)||void 0===t?void 0:t.trainingId).then((function(){var t;null===(t=e.hubConnection)||void 0===t||t.stop()})).then((function(){return console.log("Connection stopped")})).catch((function(e){return console.log(e)})),e.hubConnection.stop()}}}),Y=Object(k.a)(S.prototype,"addcomment",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.trainingId=null===(i=e.training)||void 0===i?void 0:i.trainingId,t.prev=1,t.next=4,e.hubConnection.invoke("SendComment",n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),W=Object(k.a)(S.prototype,"loadTrainings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(x.a.mark((function t(){var n,i,r,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._baseRepository.userRepository.isLoggedIn,e.loading=!0,t.prev=2,t.next=5,We.list(e.axiosParams);case 5:i=t.sent,r=i.trainings,a=i.trainingCount,Object(R.i)((function(){r.forEach((function(t){$e(t,e._baseRepository.userRepository.user,n),e.trainingRegestry.set(t.trainingId,t),console.log(t.buyers)})),e.trainingCount=a,e.loading=!1})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),Object(R.i)((function(){console.log(t.t0),e.loading=!1}));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))}}),J=Object(k.a)(S.prototype,"createTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,We.create(n);case 4:(i=Qe(e._baseRepository.userRepository.user)).isOwner=!0,(r=[]).push(i),n.buyers=r,n.isOwner=!0,n.comments=[],Object(R.i)((function(){e.trainingRegestry.set(n.trainingId,n),e.training=n,e.submitting=!1})),Kn.push("/detailTraining/".concat(n.trainingId)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),Object(R.i)((function(){e.submitting=!1,console.log(t.t0)})),I.b.error("Error submitting Data");case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}}),K=Object(k.a)(S.prototype,"editTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,We.update(n);case 4:Object(R.i)((function(){e.trainingRegestry.set(n.trainingId,n),e.training=n,e.submitting=!1})),Kn.push("/detailTraining/".concat(n.trainingId)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(R.i)((function(){console.log(t.t0),e.submitting=!1})),I.b.error("Error submitting Data");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),$=Object(k.a)(S.prototype,"deleteTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n,i){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,e.target=n.currentTarget.name,t.prev=2,t.next=5,We.delete(i);case 5:Object(R.i)((function(){e.trainingRegestry.delete(i),e.training=null,e.submitting=!1,e.target=""})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Object(R.i)((function(){console.log(t.t0),e.submitting=!1,e.target=""}));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),Q=Object(k.a)(S.prototype,"loadTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e._baseRepository.userRepository.isLoggedIn,!(r=e.getTraining(n))){t.next=7;break}return e.training=r,t.abrupt("return",r);case 7:return t.prev=7,e.loading=!0,t.next=11,We.details(n);case 11:r=t.sent,Object(R.i)((function(){return $e(r,e._baseRepository.userRepository.user,i),e.training=r,e.loading=!1,console.log(r),r})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Object(R.i)((function(){console.log(t.t0),e.loading=!1}));case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()}}),X=Object(k.a)(S.prototype,"buyTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Qe(e._baseRepository.userRepository.user),e.loadingBuy=!0,t.prev=2,t.next=5,We.buy(e.training.trainingId);case 5:Object(R.i)((function(){e.training&&(e.training.buyers.push(n),e.training.isBuyer=!0,e.trainingRegestry.set(e.training.trainingId,e.training),e.loadingBuy=!1)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(R.i)((function(){e.loadingBuy=!1})),I.b.error("Problem buying course");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),Z=Object(k.a)(S.prototype,"refundTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBuy=!0,t.prev=1,t.next=4,We.refund(e.training.trainingId);case 4:Object(R.i)((function(){e.training&&(e.training.buyers=e.training.buyers.filter((function(t){return t.username!==e._baseRepository.userRepository.user.username})),e.training.isBuyer=!1,e.trainingRegestry.set(e.training.trainingId,e.training),e.loadingBuy=!1)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(R.i)((function(){e.loadingBuy=!1})),I.b.error("Problem buying course");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}}),ee=Object(k.a)(S.prototype,"getTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.trainingRegestry.get(t)}}}),te=Object(k.a)(S.prototype,"selectTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.training=e.trainingRegestry.get(t)}}}),ne=Object(k.a)(S.prototype,"clearTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.training=null}}}),S),et=(ie=function(){function e(t){Object(f.a)(this,e),this.refreshTokenTimeOut=void 0,this._baseRepository=void 0,Object(w.a)(this,"user",re,this),Object(w.a)(this,"loading",ae,this),Object(w.a)(this,"login",oe,this),Object(w.a)(this,"register",ce,this),Object(w.a)(this,"getUser",se,this),Object(w.a)(this,"logout",le,this),Object(w.a)(this,"refreshToken",ue,this),Object(w.a)(this,"fbLogin",be,this),this._baseRepository=t}return Object(C.a)(e,[{key:"startRefreshTokenTimer",value:function(e){var t=JSON.parse(atob(e.token.split(".")[1])),n=new Date(1e3*t.exp).getTime()-Date.now()-6e4;this.refreshTokenTimeOut=setTimeout(this.refreshToken,n)}},{key:"stopRefreshTokenTimer",value:function(){clearTimeout(this.refreshTokenTimeOut)}},{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),re=Object(k.a)(ie.prototype,"user",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=Object(k.a)(ie.prototype,"loading",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(k.a)(ie.prototype,"isLoggedIn",[R.c],Object.getOwnPropertyDescriptor(ie.prototype,"isLoggedIn"),ie.prototype),oe=Object(k.a)(ie.prototype,"login",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Je.login(n);case 3:i=t.sent,Object(R.i)((function(){e.user=i})),e._baseRepository.commonRepository.setToken(i.token),e.startRefreshTokenTimer(i),e._baseRepository.modalRepository.closeModal(),Kn.push("/trainings"),e._baseRepository.trainingsRepository.loadTrainings(),console.log(e.user),t.next=17;break;case 13:throw t.prev=13,t.t0=t.catch(0),console.log(t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}}),ce=Object(k.a)(ie.prototype,"register",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Je.register(n);case 3:i=t.sent,e._baseRepository.modalRepository.closeModal(),e._baseRepository.commonRepository.setToken(i.token),Kn.push("/user/registerSuccess?email=".concat(n.email)),console.log(e.user),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(0),console.log(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),se=Object(k.a)(ie.prototype,"getUser",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Je.current();case 3:n=t.sent,Object(R.i)((function(){e.user=n})),e._baseRepository.commonRepository.setToken(n.token),e.startRefreshTokenTimer(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),le=Object(k.a)(ie.prototype,"logout",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._baseRepository.commonRepository.setToken(null),e.user=null,e._baseRepository.trainingsRepository.loadTrainings()}}}),ue=Object(k.a)(ie.prototype,"refreshToken",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopRefreshTokenTimer(),t.prev=1,t.next=4,Je.refreshToken();case 4:n=t.sent,Object(R.i)((function(){e.user=n})),e._baseRepository.commonRepository.setToken(n.token),e.startRefreshTokenTimer(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),be=Object(k.a)(ie.prototype,"fbLogin",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.fbLogin(n.accessToken);case 4:i=t.sent,Object(R.i)((function(){e.user=i,e._baseRepository.commonRepository.setToken(i.token),e.startRefreshTokenTimer(i),e._baseRepository.modalRepository.closeModal(),Kn.push("/trainings"),e._baseRepository.trainingsRepository.loadTrainings(),e.loading=!1})),console.log(e.user),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),Object(R.i)((function(){e.loading=!1})),console.log(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),ie),tt=(je=function e(t){var n=this;Object(f.a)(this,e),this.baseRepository=void 0,Object(w.a)(this,"token",de,this),Object(w.a)(this,"appLoaded",pe,this),Object(w.a)(this,"setToken",he,this),Object(w.a)(this,"setAppLoaded",ge,this),this.baseRepository=t,Object(R.h)((function(){return n.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},de=Object(k.a)(je.prototype,"token",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),pe=Object(k.a)(je.prototype,"appLoaded",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Object(k.a)(je.prototype,"setToken",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),ge=Object(k.a)(je.prototype,"setAppLoaded",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),je),nt=(Oe=R.g.shallow,fe=function e(t){Object(f.a)(this,e),this.baseRepository=void 0,Object(w.a)(this,"modal",me,this),Object(w.a)(this,"openModal",xe,this),Object(w.a)(this,"closeModal",ye,this),this.baseRepository=t},me=Object(k.a)(fe.prototype,"modal",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),xe=Object(k.a)(fe.prototype,"openModal",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),ye=Object(k.a)(fe.prototype,"closeModal",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),fe),it=n(44),rt=(ve=function(){function e(t){var n=this;Object(f.a)(this,e),this.baseRepository=void 0,Object(w.a)(this,"profile",we,this),Object(w.a)(this,"loadingProfile",Ce,this),Object(w.a)(this,"uploadingPhoto",ke,this),Object(w.a)(this,"loading",Re,this),Object(w.a)(this,"followings",Te,this),Object(w.a)(this,"activeTab",Pe,this),Object(w.a)(this,"userTrainings",Ie,this),Object(w.a)(this,"loadingTraining",ze,this),Object(w.a)(this,"setActiveTab",Se,this),Object(w.a)(this,"loadUserTrainings",Le,this),Object(w.a)(this,"loadProfile",De,this),Object(w.a)(this,"uploadPhoto",Me,this),Object(w.a)(this,"setMainPhoto",Fe,this),Object(w.a)(this,"deletePhoto",Be,this),Object(w.a)(this,"editProfile",Ae,this),Object(w.a)(this,"follow",Ee,this),Object(w.a)(this,"unfollow",Ne,this),Object(w.a)(this,"loadFollowings",Ue,this),this.baseRepository=t,Object(R.h)((function(){return n.activeTab}),(function(e){if(3===e||4===e){var t=3===e?"followers":"followings";n.loadFollowings(t)}else n.followings=[]}))}return Object(C.a)(e,[{key:"isCurrentUser",get:function(){return!(!this.baseRepository.userRepository.user||!this.profile)&&this.baseRepository.userRepository.user.username===this.profile.username}}]),e}(),we=Object(k.a)(ve.prototype,"profile",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=Object(k.a)(ve.prototype,"loadingProfile",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ke=Object(k.a)(ve.prototype,"uploadingPhoto",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Re=Object(k.a)(ve.prototype,"loading",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=Object(k.a)(ve.prototype,"followings",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pe=Object(k.a)(ve.prototype,"activeTab",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ie=Object(k.a)(ve.prototype,"userTrainings",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ze=Object(k.a)(ve.prototype,"loadingTraining",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(k.a)(ve.prototype,"isCurrentUser",[R.c],Object.getOwnPropertyDescriptor(ve.prototype,"isCurrentUser"),ve.prototype),Se=Object(k.a)(ve.prototype,"setActiveTab",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),Le=Object(k.a)(ve.prototype,"loadUserTrainings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n,i){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingTraining=!0,t.prev=1,t.next=4,Ke.listTrainings(n,i);case 4:r=t.sent,Object(R.i)((function(){e.userTrainings=r,e.loadingTraining=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),I.b.error("Problem Uploading photo!"),Object(R.i)((function(){e.loadingTraining=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),De=Object(k.a)(ve.prototype,"loadProfile",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ke.get(n);case 3:i=t.sent,Object(R.i)((function(){e.profile=i,e.loadingProfile=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(R.i)((function(){e.loadingProfile=!1})),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Me=Object(k.a)(ve.prototype,"uploadPhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadingPhoto=!0,t.prev=1,t.next=4,Ke.uploadPhoto(n);case 4:i=t.sent,Object(R.i)((function(){e.profile&&(e.profile.photos.push(i),i.isMain&&e.baseRepository.userRepository.user&&(e.baseRepository.userRepository.user.image=i.url,e.profile.image=i.url,e.profile.image=i.url)),e.uploadingPhoto=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),I.b.error("Problem Uploading photo!"),Object(R.i)((function(){e.uploadingPhoto=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Fe=Object(k.a)(ve.prototype,"setMainPhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ke.setMainPhoto(n.id);case 4:Object(R.i)((function(){e.baseRepository.userRepository.user.image=n.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===n.id})).isMain=!0,e.profile.image=n.url,e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),I.b.error("Problem setting photo as main!"),Object(R.i)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Be=Object(k.a)(ve.prototype,"deletePhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ke.deletePhoto(n.id);case 4:Object(R.i)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==n.id})),e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),I.b.error("Problem deleting photo!"),Object(R.i)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(k.a)(ve.prototype,"editProfile",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ke.editProfile(n);case 3:Object(R.i)((function(){n.displayName!==e.baseRepository.userRepository.user.displayName&&(e.baseRepository.userRepository.user.displayName=n.displayName),e.profile=Object(it.a)(Object(it.a)({},e.profile),n)})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),I.b.error("Problem updating profile"),Object(R.i)((function(){}));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Ee=Object(k.a)(ve.prototype,"follow",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ke.follow(n);case 4:Object(R.i)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1,console.log(e.profile.followingsCount)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),I.b.error("Problem following user"),Object(R.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ne=Object(k.a)(ve.prototype,"unfollow",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ke.unfollow(n);case 4:Object(R.i)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),I.b.error("Problem unfollowing user"),Object(R.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ue=Object(k.a)(ve.prototype,"loadFollowings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(x.a.mark((function t(n){var i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ke.listFollowings(e.profile.username,n);case 4:i=t.sent,Object(R.i)((function(){e.followings=i,e.loading=!1})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(R.i)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ve);Object(R.d)({enforceActions:"always"});var at=Object(r.createContext)(new function e(){Object(f.a)(this,e),this.trainingsRepository=void 0,this.userRepository=void 0,this.commonRepository=void 0,this.modalRepository=void 0,this.profileRepository=void 0,this.trainingsRepository=new Ze(this),this.userRepository=new et(this),this.commonRepository=new tt(this),this.modalRepository=new nt(this),this.profileRepository=new rt(this)}),ot=n(127),ct=n(29),st=n(612),lt=n(624),ut=n(608),bt=n(166),jt=function(e){var t=e.input,n=e.width,r=e.type,a=e.placeholder,o=e.meta,c=o.touched,s=o.error;return Object(i.jsxs)(st.a.Field,{error:c&&!!s,type:r,width:n,children:[Object(i.jsx)("input",Object(it.a)(Object(it.a)({},t),{},{placeholder:a})),c&&s&&Object(i.jsx)(bt.a,{basic:!0,color:"red",children:s})]})},dt=n(619),pt=function(e){var t=e.error,n=e.text;return Object(i.jsxs)(dt.a,{error:!0,children:[Object(i.jsx)(dt.a.Header,{children:t.statusText}),t.data&&Object.keys(t.data.errors).length>0&&Object(i.jsx)(dt.a.List,{children:Object.values(t.data.errors).flat().map((function(e,t){return Object(i.jsx)(dt.a.Item,{children:e},t)}))}),n&&Object(i.jsx)(dt.a.Content,{content:n})]})},ht=n(78),gt=n(36),Ot=n(331),ft=n.n(Ot),mt=Object(h.a)((function(e){var t=e.fbCallBack,n=e.loading;return Object(i.jsx)("div",{children:Object(i.jsx)(ft.a,{appId:"366656587886217",fields:"name,email,picture",callback:t,render:function(e){return Object(i.jsxs)(j.a,{onClick:e.onClick,type:"button",fluid:!0,color:"facebook",loading:n,children:[Object(i.jsx)(d.a,{name:"facebook"}),"Login with Facebook"]})}})})})),xt=Object(gt.combineValidators)({email:Object(gt.isRequired)("email"),password:Object(gt.isRequired)("password")}),yt=Object(h.a)((function(){var e=Object(r.useContext)(at).userRepository,t=e.login,n=e.fbLogin,a=e.loading;return Object(i.jsx)(ct.b,{onSubmit:function(e){return t(e).catch((function(e){return Object(ot.a)({},ht.a,e)}))},validate:xt,render:function(e){var t=e.handleSubmit,r=e.submitting,o=e.submitError,c=e.invalid,s=e.pristine,l=e.dirtySinceLastSubmit;return Object(i.jsxs)(st.a,{onSubmit:t,error:!0,children:[Object(i.jsx)(lt.a,{as:"h2",content:"Login to Fasserly",color:"blue",textAlign:"center"}),Object(i.jsx)(ct.a,{name:"email",component:jt,placeholder:"Email"}),Object(i.jsx)(ct.a,{name:"password",component:jt,placeholder:"Password",type:"Password"}),o&&!l&&Object(i.jsx)(pt,{error:o,text:401===o.status?" Unauthorized Invalid email or password":"unknown"}),Object(i.jsx)(j.a,{disabled:c&&!l||s,loading:r,color:"blue",content:"Login",fluid:!0}),Object(i.jsx)(ut.a,{horizontal:!0,children:"OR"}),Object(i.jsx)(mt,{loading:a,fbCallBack:n})]})}})})),vt=Object(gt.combineValidators)({email:Object(gt.isRequired)("email"),username:Object(gt.isRequired)("username"),diplayName:Object(gt.isRequired)("diplayName"),password:Object(gt.isRequired)("password")}),wt=function(){var e=Object(r.useContext)(at).userRepository.register;return Object(i.jsx)(ct.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(ot.a)({},ht.a,e)}))},validate:vt,render:function(e){var t=e.handleSubmit,n=e.submitting,r=e.submitError,a=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return Object(i.jsxs)(st.a,{onSubmit:t,error:!0,children:[Object(i.jsx)(lt.a,{as:"h2",content:"Sign Up to Fasserly",color:"blue",textAlign:"center"}),Object(i.jsx)(ct.a,{name:"username",component:jt,placeholder:"username"}),Object(i.jsx)(ct.a,{name:"diplayName",component:jt,placeholder:"diplayName"}),Object(i.jsx)(ct.a,{name:"email",component:jt,placeholder:"Email"}),Object(i.jsx)(ct.a,{name:"password",component:jt,placeholder:"Password",type:"Password"}),r&&!c&&Object(i.jsx)(pt,{error:r}),Object(i.jsx)(j.a,{disabled:a&&!c||o,loading:n,color:"blue",content:"Register",fluid:!0})]})}})},Ct=Object(h.a)((function(){var e=Object(r.useContext)(at),t=e.userRepository,n=t.isLoggedIn,a=t.user,o=t.logout,c=e.modalRepository.openModal;return Object(i.jsx)("div",{children:Object(i.jsxs)(l.a,{pointing:!0,children:[Object(i.jsx)(l.a.Item,{as:g.b,exact:!0,to:"/trainings",name:"home",children:Object(i.jsx)("img",{src:"/assets/Logo.png",alt:"Logo",height:"30px",width:"30"})}),Object(i.jsx)(u.a,{item:!0,simple:!0,text:"Categories",direction:"right",options:O}),Object(i.jsx)(l.a.Item,{children:Object(i.jsx)(b.a,{icon:"search",placeholder:"Search...",position:"left"})}),n&&a&&Object(i.jsx)(l.a.Item,{children:Object(i.jsx)(j.a,{as:g.b,to:"/createTraining",content:"Create Training"})}),Object(i.jsx)(l.a.Item,{position:"right",children:Object(i.jsxs)(j.a,{animated:"vertical",margin:"10",children:[Object(i.jsx)(j.a.Content,{hidden:!0,children:"Basket"}),Object(i.jsx)(j.a.Content,{visible:!0,children:Object(i.jsx)(d.a,{name:"shop"})})]})}),n&&a?Object(i.jsxs)(l.a.Item,{children:[Object(i.jsx)(p.a,{avatar:!0,spaced:"right",src:a.image||"/assets/Logo.png"}),Object(i.jsx)(u.a,{pointing:"top right",text:a.displayName,children:Object(i.jsxs)(u.a.Menu,{children:[Object(i.jsx)(u.a.Item,{as:g.a,to:"/profile/".concat(a.username),text:"My profile",icon:"user"}),Object(i.jsx)(u.a.Item,{onClick:o,text:"Logout",icon:"power"})]})})]}):Object(i.jsx)(l.a.Item,{children:Object(i.jsxs)("div",{children:[Object(i.jsx)(j.a,{onClick:function(){return c(Object(i.jsx)(yt,{}))},basic:!0,color:"blue",children:"Sign in"}),Object(i.jsx)(j.a,{onClick:function(){return c(Object(i.jsx)(wt,{}))},color:"red",children:"Sign up"})]})})]})})})),kt=n(43),Rt=n(345),Tt=n(147),Pt=n(609),It=n(614),zt=n(258),St=n(625),Lt=n(341),Dt=n(615),Mt=n(611),Ft={borderColor:"orange",borderWidth:2},Bt=function(e){var t=e.buyers;return Object(i.jsx)(Dt.a,{horizontal:!0,children:t&&t.map((function(e){return Object(i.jsx)(Dt.a.Item,{children:Object(i.jsx)(Mt.a,{header:e.displayName,trigger:Object(i.jsx)(p.a,{size:"mini",circular:!0,src:e.image||"/assets/user.jpg",bordered:!0,style:e.following?Ft:null})})},e.username)}))})},At={filtre:"Brightness(50%)",marginBottom:3},Et=function(e){var t=e.training,n=t.buyers.filter((function(e){return e.isOwner}))[0],a=Object(r.useContext)(at),o=a.trainingsRepository.buyTraining,c=a.userRepository.isLoggedIn;return Object(i.jsxs)(zt.a.Group,{children:[Object(i.jsx)(zt.a,{children:Object(i.jsx)(It.a.Group,{children:Object(i.jsxs)(It.a,{children:[Object(i.jsx)(It.a.Image,{as:g.a,to:"/detailTraining/".concat(t.trainingId),src:"/assets/".concat(t.title,".jpg"),size:"medium",style:At}),Object(i.jsxs)(It.a.Content,{children:[Object(i.jsx)(It.a.Header,{as:g.a,to:"/detailTraining/".concat(t.trainingId),children:t.title}),Object(i.jsxs)(It.a.Description,{children:["Created By ",Object(i.jsx)(g.a,{to:"/profile/".concat(n.username),children:Object(i.jsx)("strong",{children:n.displayName})})," "]}),Object(i.jsx)(It.a.Description,{children:Object(i.jsx)(St.a,{maxRating:5,defaultRating:3,icon:"star",size:"small"})}),c&&t.isOwner&&Object(i.jsx)(It.a.Description,{children:Object(i.jsx)(bt.a,{basic:!0,color:"orange",content:"You are the trainer this activity"})}),c&&t.isBuyer&&!t.isOwner&&Object(i.jsx)(It.a.Description,{children:Object(i.jsx)(bt.a,{basic:!0,color:"green",content:"You are going to this activity"})})]})]})})}),Object(i.jsxs)(zt.a,{children:[Object(i.jsx)(d.a,{name:"clock"})," ",Object(Lt.a)(t.dateOfCreation,"h:mm a"),Object(i.jsx)("br",{}),Object(i.jsx)("span",{children:t.description})]}),c&&Object(i.jsx)(zt.a,{secondary:!0,children:Object(i.jsx)(Bt,{buyers:t.buyers})}),!c||t.isOwner||t.isBuyer?Object(i.jsx)(zt.a,{clearing:!0,attached:"bottom",children:Object(i.jsx)(j.a,{color:"teal",content:"Put to basket"})}):Object(i.jsxs)(zt.a,{clearing:!0,attached:"bottom",children:[Object(i.jsx)(j.a,{color:"teal",content:"Put to basket"}),Object(i.jsx)(j.a,{color:"orange",onClick:o,content:"Buy now"})]})]})},Nt=Object(h.a)((function(){var e=Object(r.useContext)(at).trainingsRepository.trainingByDate;return Object(i.jsx)(It.a.Group,{divided:!0,children:Object(i.jsx)(r.Fragment,{children:e.map((function(e){var t=Object(kt.a)(e,2),n=t[0],a=t[1];return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(bt.a,{size:"large",color:"blue",children:Object(Lt.a)(new Date(n),"eeee do MMMM")}),Object(i.jsx)(It.a.Group,{children:a.map((function(e){return Object(i.jsx)(Et,{training:e},e.trainingId)}))})]},n)}))})})})),Ut=n(214),Gt=Object(h.a)((function(){var e=Object(r.useContext)(at).trainingsRepository,t=e.setPredicate,n=e.predicate;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsxs)(l.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50},children:[Object(i.jsx)(lt.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),Object(i.jsx)(l.a.Item,{active:0===n.size,onClick:function(){return t("all","true")},color:"blue",name:"all",content:"All Courses"}),Object(i.jsx)(l.a.Item,{active:n.has("isBuyer"),onClick:function(){return t("isBuyer","true")},color:"blue",name:"username",content:"My courses"}),Object(i.jsx)(l.a.Item,{active:n.has("isOwner"),onClick:function(){return t("isOwner","true")},color:"blue",name:"host",content:"I'm owner"})]}),Object(i.jsx)(lt.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),Object(i.jsx)(Ut.Calendar,{onChange:function(e){return t("startDate",e)},value:n.get("startDate")||new Date})]})})),_t=n(620),Ht=function(){return Object(i.jsx)(r.Fragment,{children:Object(i.jsx)(_t.a,{fluid:!0,style:{marginTop:50},children:Object(i.jsxs)(zt.a.Group,{children:[Object(i.jsx)(zt.a,{style:{minHeight:110},children:Object(i.jsxs)(_t.a,{children:[Object(i.jsxs)(_t.a.Header,{image:!0,children:[Object(i.jsx)(_t.a.Line,{}),Object(i.jsx)(_t.a.Line,{})]}),Object(i.jsx)(_t.a.Paragraph,{children:Object(i.jsx)(_t.a.Line,{})})]})}),Object(i.jsx)(zt.a,{children:Object(i.jsxs)(_t.a,{children:[Object(i.jsx)(_t.a.Line,{}),Object(i.jsx)(_t.a.Line,{})]})}),Object(i.jsx)(zt.a,{secondary:!0,style:{minHeight:70}}),Object(i.jsx)(zt.a,{clearing:!0,children:Object(i.jsxs)(_t.a,{children:[Object(i.jsx)(_t.a.Line,{}),Object(i.jsx)(_t.a.Line,{})]})})]})})})},Vt=n(335),qt=n.n(Vt),Yt=Object(h.a)((function(){var e=Object(r.useContext)(at),t=e.trainingsRepository,n=t.loadTrainings,a=t.loading,o=t.setPage,c=t.page,s=t.totalPages,l=window.localStorage.getItem("jwt"),u=e.userRepository.isLoggedIn,b=Object(r.useState)(!1),j=Object(kt.a)(b,2),d=j[0],p=j[1];return Object(r.useEffect)((function(){n()}),[n]),Object(i.jsxs)(Rt.a,{children:[Object(i.jsx)(Tt.a,{width:10,children:a&&0===c?Object(i.jsx)(Ht,{}):Object(i.jsx)(qt.a,{pageStart:0,loadMore:function(){p(!0),o(c+1),n().then((function(){return p(!1)}))},hasMore:!d&&c+1<s,initialLoad:!1,children:Object(i.jsx)(Nt,{})})}),u&&l&&Object(i.jsx)(Rt.a.Column,{width:6,children:Object(i.jsx)(Gt,{})}),Object(i.jsx)(Rt.a.Column,{width:10,children:Object(i.jsx)(Pt.a,{active:d})})]})})),Wt=n(222),Jt=function e(t){Object(f.a)(this,e),this.trainingId="",this.title="",this.language="",this.price="0",this.rating=0,this.dateOfCreation=new Date(Date.now()),this.updateDate=new Date(Date.now()),this.description="",this.isActive=!0,this.category="",Object.assign(this,t)},Kt=n(336),$t=function(e){var t=e.input,n=e.width,r=e.rows,a=e.placeholder,o=e.meta,c=o.touched,s=o.error;return Object(i.jsxs)(st.a.Field,{error:c&&!!s,width:n,children:[Object(i.jsx)("textarea",Object(it.a)(Object(it.a)({rows:r},t),{},{placeholder:a})),c&&s&&Object(i.jsx)(bt.a,{basic:!0,color:"red",children:s})]})},Qt=n(607),Xt=function(e){var t=e.input,n=e.options,r=e.width,a=e.placeholder,o=e.meta,c=o.touched,s=o.error;return Object(i.jsxs)(st.a.Field,{error:c&&!!s,width:r,children:[Object(i.jsx)(Qt.a,{value:t.value,onChange:function(e,n){return t.onChange(n.value)},placeholder:a,options:n}),c&&s&&Object(i.jsx)(bt.a,{basic:!0,color:"red",children:s})]})},Zt=function(e){e.id;var t=e.input,n=e.width,r=e.placeholder,a=e.date,o=void 0!==a&&a,c=e.meta,s=e.error;Object(Wt.a)(e,["id","input","width","placeholder","date","meta","error"]);return Object(i.jsxs)(st.a.Field,{error:c&&!!s,width:n,children:[Object(i.jsx)(Ut.DateTimePicker,{placeholder:r,value:t.value||null,date:o,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()}}),c&&s&&Object(i.jsx)(bt.a,{basic:!0,color:"red",children:s})]})},en=Object(gt.combineValidators)({title:Object(gt.isRequired)({message:"title est obligatoir"}),category:Object(gt.isRequired)({message:"category est obligatoir"}),description:Object(gt.composeValidators)(Object(gt.isRequired)("description "),Object(gt.hasLengthGreaterThan)(10)({message:"au moin 10 charact\xe9res "}))(),price:Object(gt.isRequired)({message:"price est obligatoir"})}),tn=Object(h.a)((function(e){var t=e.match,n=e.history,a=Object(r.useContext)(at).trainingsRepository,o=a.submitting,c=a.loadTraining,s=a.createTraining,l=a.editTraining,u=Object(r.useState)(new Jt),b=Object(kt.a)(u,2),d=b[0],p=b[1],h=Object(r.useState)(!1),g=Object(kt.a)(h,2),f=g[0],m=g[1];Object(r.useEffect)((function(){t.params.id&&(m(!0),c(t.params.id).then((function(e){return p(new Jt(e))})).finally((function(){return m(!1)})))}),[c,t.params.id]);return Object(i.jsx)(Rt.a,{children:Object(i.jsx)(Tt.a,{width:10,children:Object(i.jsx)(zt.a,{clearing:!0,children:Object(i.jsx)(ct.b,{validate:en,initialValues:d,onSubmit:function(e){console.log(e);var t=function(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r="".concat(t,"-").concat(n,"-").concat(i);return new Date(r)}(e.dateOfCreation),n=(e.date,e.time,Object(Wt.a)(e,["date","time"]));if(n.dateOfCreation=t,n.trainingId)l(n);else{var i=Object(it.a)(Object(it.a)({},n),{},{trainingId:Object(Kt.v4)()});console.log(n),s(i)}},render:function(e){var t=e.handleSubmit,r=e.pristine;return Object(i.jsxs)(st.a,{onSubmit:t,loading:f,children:[Object(i.jsx)(ct.a,{component:jt,placeholder:"Title",name:"title",value:d.title}),Object(i.jsx)(ct.a,{component:$t,rows:2,placeholder:"Description",name:"description",value:null===d||void 0===d?void 0:d.description}),Object(i.jsx)(ct.a,{placeholder:"Date",component:Zt,date:!0,name:"dateOfCreation",value:d.dateOfCreation}),Object(i.jsx)(ct.a,{component:jt,placeholder:"Price",name:"price",value:d.price}),Object(i.jsx)(ct.a,{component:Xt,options:O,name:"category",value:null===d||void 0===d?void 0:d.category}),Object(i.jsxs)(j.a.Group,{floated:"right",children:[Object(i.jsx)(j.a,{disabled:f,onClick:d.trainingId?function(){return n.push("/detailTraining/".concat(d.trainingId))}:function(){return n.push("/trainings")},floated:"right",type:"button",children:"Cancel"}),Object(i.jsx)(j.a.Or,{}),Object(i.jsx)(j.a,{positive:!0,disabled:f||r,loading:o,floated:"right",type:"submit",children:"Submit"})]})]})}})})})})})),nn=n(618),rn=n(622),an=function(e){var t=e.inverted,n=e.content;return Object(i.jsx)(rn.a,{active:!0,inverted:t,children:Object(i.jsx)(Pt.a,{content:n})})},on=n(334),cn=function(e){var t=e.training;return Object(i.jsxs)(on.a,{children:[Object(i.jsx)(zt.a,{attached:"top",children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsx)(Rt.a.Column,{width:1,children:Object(i.jsx)(d.a,{size:"large",color:"teal",name:"info"})}),Object(i.jsx)(Rt.a.Column,{width:15,children:Object(i.jsx)("p",{children:t.description})})]})}),Object(i.jsx)(zt.a,{children:Object(i.jsxs)(Rt.a,{verticalAlign:"middle",children:[Object(i.jsx)(Rt.a.Column,{width:1,children:Object(i.jsx)(d.a,{size:"large",color:"teal",name:"calendar"})}),Object(i.jsx)(Rt.a.Column,{width:15,children:Object(i.jsxs)("span",{children:[Object(Lt.a)(t.dateOfCreation,"do MMMM YYYY")," at ",Object(Lt.a)(t.dateOfCreation,"h:mm a")]})})]})}),Object(i.jsx)(zt.a,{children:Object(i.jsxs)(Rt.a,{verticalAlign:"middle",children:[Object(i.jsx)(Rt.a.Column,{width:1,children:Object(i.jsx)(d.a,{size:"large",color:"teal",name:"euro sign"})}),Object(i.jsx)(Rt.a.Column,{width:15,children:Object(i.jsx)("span",{children:t.price})})]})})]})},sn=Object(h.a)((function(e){var t=e.buyers;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsxs)(zt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal",children:[t.length," ",1===t.length?"Person":"People"," participate"]}),Object(i.jsx)(zt.a,{attached:!0,children:Object(i.jsx)(Dt.a,{relaxed:!0,divided:!0,children:t.map((function(e){return Object(i.jsxs)(It.a,{style:{position:"relative"},children:[e.isOwner&&Object(i.jsx)(bt.a,{style:{position:"absolute"},color:"orange",ribbon:"right",children:"the trainer"}),Object(i.jsx)(p.a,{size:"tiny",src:e.image||"/assets/user.jpg"}),Object(i.jsxs)(It.a.Content,{verticalAlign:"middle",children:[Object(i.jsx)(It.a.Header,{as:"h3",children:Object(i.jsx)(g.a,{to:"/profile/".concat(e.username),children:e.displayName})}),e.following&&Object(i.jsx)(It.a.Extra,{style:{color:"orange"},children:"Following"})]})]},e.username)}))})})]})})),ln=n(613),un=n(616),bn=Object(h.a)((function(){var e=Object(r.useContext)(at),t=e.trainingsRepository,n=t.createHubConnection,a=t.stopHubConnection,o=t.addcomment,c=t.training,s=e.userRepository.isLoggedIn;return Object(r.useEffect)((function(){return n(c.trainingId),function(){a()}}),[n,a,c]),Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(zt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"},children:Object(i.jsx)(lt.a,{children:"Chat about this course"})}),Object(i.jsx)(zt.a,{attached:!0,children:Object(i.jsxs)(ln.a.Group,{children:[c&&c.comments&&c.comments.map((function(e){return Object(i.jsxs)(ln.a,{children:[Object(i.jsx)(ln.a.Avatar,{src:e.image||"/assets/user.png"}),Object(i.jsxs)(ln.a.Content,{children:[Object(i.jsx)(ln.a.Author,{as:g.a,to:"/profile/".concat(e.username),children:e.diplayName}),Object(i.jsx)(ln.a.Metadata,{children:Object(i.jsx)("div",{children:Object(un.a)(new Date(e.dateOfComment),new Date)})}),Object(i.jsx)(ln.a.Text,{children:e.body})]})]},e.dateOfComment)})),s&&Object(i.jsx)(ct.b,{onSubmit:o,render:function(e){var t=e.handleSubmit,n=e.submitting,r=e.form;return Object(i.jsxs)(st.a,{onSubmit:function(){return t().then((function(){return r.reset()}))},children:[Object(i.jsx)(ct.a,{name:"body",component:$t,rows:2,placeholder:"Add you comment"}),Object(i.jsx)(j.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n})]})}})]})})]})})),jn=Object(h.a)((function(e){var t=e.match,n=e.history,a=Object(r.useContext)(at).trainingsRepository,o=a.training,c=a.loadTraining,s=a.loading,l=(a.deleteTraining,a.refundTraining),u=a.buyTraining,b=a.loadingBuy;return Object(r.useEffect)((function(){c(t.params.id)}),[c,t.params.id,n]),s?Object(i.jsx)(an,{content:"Loading Training.."}):o?Object(i.jsxs)(Rt.a,{children:[Object(i.jsxs)(Tt.a,{width:10,children:[Object(i.jsxs)(nn.a,{fluid:!0,children:[Object(i.jsx)(p.a,{size:"tiny",src:"/assets/".concat(o.title,".jpg"),ui:!1}),Object(i.jsxs)(nn.a.Content,{children:[Object(i.jsxs)(nn.a.Header,{children:[null===o||void 0===o?void 0:o.title,Object(i.jsx)(bt.a.Group,{tag:!0,children:Object(i.jsxs)(bt.a,{as:"a",children:["\u20ac",null===o||void 0===o?void 0:o.price]})})]}),Object(i.jsx)(nn.a.Meta,{children:Object(i.jsx)("span",{className:"date",children:Object(Lt.a)(o.dateOfCreation,"do MMMM YYYY")})}),Object(i.jsx)(nn.a.Description,{children:null===o||void 0===o?void 0:o.description})]}),o.isOwner?Object(i.jsxs)(nn.a.Content,{extra:!0,children:[Object(i.jsx)(j.a,{as:g.a,to:"/manage/".concat(o.trainingId),color:"green",children:"Edit"}),Object(i.jsx)(j.a,{color:"red",children:"Delete"}),Object(i.jsx)(j.a,{onClick:function(){return n.push("/trainings")},children:" Cancel"})]}):o.isBuyer?Object(i.jsxs)(nn.a.Content,{extra:!0,children:[Object(i.jsx)(j.a,{as:g.a,to:"/share/".concat(o.trainingId),color:"green",children:"Share"}),Object(i.jsx)(j.a,{as:g.a,to:"/favorite/".concat(o.trainingId),color:"red",children:"favorites"}),Object(i.jsx)(j.a,{loading:b,onClick:l,children:" Refund"})]}):Object(i.jsxs)(nn.a.Content,{extra:!0,children:[Object(i.jsx)(j.a,{loading:b,onClick:u,color:"green",children:"Purchase now"}),Object(i.jsx)(j.a,{as:g.a,to:"/basket/".concat(o.trainingId),color:"teal",children:"Put to basket"}),Object(i.jsx)(j.a,{onClick:function(){return n.push("/trainings")},children:" Cancel"})]})]}),Object(i.jsx)(cn,{training:o}),Object(i.jsx)(bn,{})]}),Object(i.jsx)(Tt.a,{width:6,children:Object(i.jsx)(sn,{buyers:o.buyers})})]}):Object(i.jsx)("h1",{children:"srf"})})),dn=n(621),pn=n(627),hn=Object(h.a)((function(e){var t=e.profile,n=e.follow,r=e.unfollow,a=e.loading,o=e.isCurrentUser,c=e.isLoggedIn;return Object(i.jsx)(zt.a,{children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsx)(Rt.a.Column,{width:12,children:Object(i.jsx)(It.a.Group,{children:Object(i.jsxs)(It.a,{children:[Object(i.jsx)(It.a.Image,{avatar:!0,size:"small",src:t.image||"/assets/user.jpg"}),Object(i.jsx)(It.a.Content,{verticalAlign:"middle",children:Object(i.jsx)(lt.a,{as:"h1",children:t.displayName})})]})})}),Object(i.jsxs)(Rt.a.Column,{width:4,children:[Object(i.jsxs)(dn.a.Group,{widths:2,children:[Object(i.jsx)(dn.a,{label:"Followers",value:t.followersCount}),Object(i.jsx)(dn.a,{label:"Following",value:t.followingsCount})]}),Object(i.jsx)(ut.a,{}),!o&&c&&Object(i.jsxs)(pn.a,{animated:"move",children:[Object(i.jsx)(pn.a.Content,{visible:!0,style:{width:"100%"},children:Object(i.jsx)(j.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not following"})}),Object(i.jsx)(pn.a.Content,{hidden:!0,children:Object(i.jsx)(j.a,{loading:a,fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",onClick:t.following?function(){return r(t.username)}:function(){return n(t.username)}})})]})]})]})})})),gn=n(628),On=n(342),fn={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},mn={borderColor:"green"},xn=function(e){var t=e.setFiles,n=Object(r.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),a=Object(On.a)({onDrop:n}),o=a.getRootProps,c=a.getInputProps,s=a.isDragActive;return Object(i.jsxs)("div",Object(it.a)(Object(it.a)({},o()),{},{style:s?Object(it.a)(Object(it.a)({},fn),mn):fn,children:[Object(i.jsx)("input",Object(it.a)({},c())),Object(i.jsx)(d.a,{name:"upload",size:"huge"}),Object(i.jsx)(lt.a,{content:"Drop image here"})]}))},yn=n(338),vn=n.n(yn),wn=(n(570),function(e){var t=e.setImage,n=e.imagePreview,a=Object(r.useRef)(null);return Object(i.jsx)(vn.a,{ref:a,src:n,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){a.current&&"undefined"===typeof a.current.getCroppedCanvas()||a&&a.current&&a.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}),Cn=Object(h.a)((function(e){var t=e.loading,n=e.uploadPhoto,a=Object(r.useState)([]),o=Object(kt.a)(a,2),c=o[0],s=o[1],l=Object(r.useState)(null),u=Object(kt.a)(l,2),b=u[0],d=u[1];return Object(r.useEffect)((function(){return function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}})),Object(i.jsx)(r.Fragment,{children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsxs)(Rt.a.Column,{width:4,children:[Object(i.jsx)(lt.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),Object(i.jsx)(xn,{setFiles:s})]}),Object(i.jsx)(Rt.a.Column,{width:1}),Object(i.jsxs)(Rt.a.Column,{width:4,children:[Object(i.jsx)(lt.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),c.length>0&&Object(i.jsx)(wn,{setImage:d,imagePreview:c[0].preview})]}),Object(i.jsx)(Rt.a.Column,{width:1}),Object(i.jsxs)(Rt.a.Column,{width:4,children:[Object(i.jsx)(lt.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),c.length>0&&Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),Object(i.jsxs)(j.a.Group,{widths:2,children:[Object(i.jsx)(j.a,{positive:!0,icon:"check",loading:t,onClick:function(){return n(b)}}),Object(i.jsx)(j.a,{negative:!0,icon:"close",disabled:t,onClick:function(){return s([])}})]})]})]})]})})})),kn=Object(h.a)((function(){var e=Object(r.useContext)(at).profileRepository,t=e.profile,n=e.isCurrentUser,a=e.uploadPhoto,o=e.uploadingPhoto,c=e.setMainPhoto,s=e.deletePhoto,l=e.loading,u=Object(r.useState)(!1),b=Object(kt.a)(u,2),d=b[0],h=b[1],g=Object(r.useState)(void 0),O=Object(kt.a)(g,2),f=O[0],m=O[1],x=Object(r.useState)(void 0),y=Object(kt.a)(x,2),v=y[0],w=y[1];return Object(i.jsx)(gn.a.Pane,{children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsxs)(Rt.a.Column,{width:16,style:{paddingBottom:0},children:[Object(i.jsx)(lt.a,{floated:"left",icon:"image",content:"Photos"}),n&&Object(i.jsx)(j.a,{onClick:function(){return h(!d)},floated:"right",basic:!0,content:d?"Cancel":"Add Photo"})]}),Object(i.jsx)(Rt.a.Column,{width:16,children:d?Object(i.jsx)(Cn,{uploadPhoto:function(e){a(e).then((function(){return h(!1)}))},loading:o}):Object(i.jsx)(nn.a.Group,{itemsPerRow:5,children:t&&t.photos.map((function(e){return Object(i.jsxs)(nn.a,{children:[Object(i.jsx)(p.a,{src:e.url}),n&&Object(i.jsxs)(j.a.Group,{fluid:!0,widths:2,children:[Object(i.jsx)(j.a,{onClick:function(t){c(e),m(t.currentTarget.name)},name:e.id,disabled:e.isMain,loading:l&&f===e.id,basic:!0,positive:!0,content:"Main"}),Object(i.jsx)(j.a,{name:e.id,disabled:e.isMain,onClick:function(t){s(e),w(t.currentTarget.name)},loading:l&&v===e.id,basic:!0,negative:!0,icon:"trash"})]})]},e.id)}))})})]})})})),Rn=Object(gt.combineValidators)({displayName:Object(gt.isRequired)("displayName")}),Tn=Object(h.a)((function(e){var t=e.editProfile,n=e.profile;return Object(i.jsx)(ct.b,{onSubmit:t,validate:Rn,initialValues:n,render:function(e){var t=e.handleSubmit,r=e.invalid,a=e.pristine,o=e.submitting;return Object(i.jsxs)(st.a,{onSubmit:t,error:!0,children:[Object(i.jsx)(ct.a,{name:"displayName",component:jt,placeholder:"Display Name",value:n.displayName}),Object(i.jsx)(ct.a,{name:"bio",component:$t,rows:3,placeholder:"Bio",value:n.bio}),Object(i.jsx)(j.a,{loading:o,floated:"right",disabled:r||a,positive:!0,content:"Update profile"})]})}})})),Pn=Object(h.a)((function(){var e=Object(r.useContext)(at).profileRepository,t=e.isCurrentUser,n=e.profile,a=e.editProfile,o=Object(r.useState)(!1),c=Object(kt.a)(o,2),s=c[0],l=c[1];return Object(i.jsx)(gn.a.Pane,{children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsxs)(Rt.a.Column,{width:16,style:{paddingBottom:0},children:[Object(i.jsx)(lt.a,{floated:"left",icon:"address card",content:"About ".concat(n.displayName)}),t&&Object(i.jsx)(j.a,{onClick:function(){return l(!s)},floated:"right",basic:!0,content:s?"Cancel":"Edit Profile"})]}),Object(i.jsx)(Rt.a.Column,{width:16,children:s?Object(i.jsx)(Tn,{editProfile:a,profile:n}):Object(i.jsxs)(Dt.a,{children:[Object(i.jsxs)(Dt.a.Item,{children:[Object(i.jsx)(Dt.a.Icon,{name:"marker"}),Object(i.jsx)(Dt.a.Content,{children:n.bio})]}),Object(i.jsxs)(Dt.a.Item,{children:[Object(i.jsx)(Dt.a.Icon,{name:"mail"}),Object(i.jsx)(Dt.a.Content,{children:n.email})]})]})})]})})})),In=function(e){var t=e.following;return Object(i.jsxs)(nn.a,{as:g.a,to:"/profile/".concat(t.username),children:[Object(i.jsx)(p.a,{src:t.image||"/assets/user.jpg"}),Object(i.jsx)(nn.a.Content,{children:Object(i.jsx)(nn.a.Header,{children:t.displayName})}),Object(i.jsx)(nn.a.Content,{extra:!0,children:Object(i.jsxs)("div",{children:[Object(i.jsx)(d.a,{name:"user"}),t.followersCount," followers"]})})]})},zn=function(){var e=Object(r.useContext)(at).profileRepository,t=e.profile,n=e.followings,a=e.loading,o=e.activeTab;return Object(i.jsx)(gn.a.Pane,{loading:a,children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsx)(Rt.a.Column,{width:16,children:Object(i.jsx)(lt.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})}),Object(i.jsx)(Rt.a.Column,{width:16,children:Object(i.jsx)(nn.a.Group,{itemsPerRow:5,children:n.map((function(e){return Object(i.jsx)(In,{following:e},e.username)}))})})]})})},Sn=[{menuItem:"Owining",pane:{key:"owned"}}],Ln=[{menuItem:"Owining",pane:{key:"owned"}},{menuItem:"Past Courses",pane:{key:"pastCourses"}},{menuItem:"Future Courses",pane:{key:"futureCourses"}}],Dn=Object(h.a)((function(){var e=Object(r.useContext)(at),t=e.profileRepository,n=t.loadUserTrainings,a=t.profile,o=t.loadingTraining,c=t.userTrainings,s=e.userRepository.isLoggedIn;Object(r.useEffect)((function(){n(a.username,"owning")}),[n,a]);return Object(i.jsx)(gn.a.Pane,{loading:o,children:Object(i.jsxs)(Rt.a,{children:[Object(i.jsx)(Rt.a.Column,{width:16,children:Object(i.jsx)(lt.a,{floated:"left",icon:"book",content:"Trainings"})}),Object(i.jsxs)(Rt.a.Column,{width:16,children:[Object(i.jsx)(gn.a,{panes:s?Ln:Sn,menu:{secondary:!0,pointing:!0},onTabChange:function(e,t){return function(e,t){var i;switch(t.activeIndex){case 1:i="past";break;case 2:i="future";break;default:i="owning"}n(a.username,i)}(0,t)}}),Object(i.jsx)("br",{}),Object(i.jsx)(nn.a.Group,{itemsPerRow:4,children:c.map((function(e){return Object(i.jsxs)(nn.a,{as:g.a,to:"/training/".concat(e.id),children:[Object(i.jsx)(p.a,{src:"/assets/".concat(e.title,".jpg"),style:{minHeight:100,objectFit:"cover"}}),Object(i.jsxs)(nn.a.Content,{children:[Object(i.jsx)(nn.a.Header,{textAlign:"center",children:e.title}),Object(i.jsxs)(nn.a.Meta,{textAlign:"center",children:[Object(i.jsx)("div",{children:Object(Lt.a)(new Date(e.date),"do LLL")}),Object(i.jsx)("div",{children:Object(Lt.a)(new Date(e.date),"h:mm a")})]})]})]},e.id)}))})]})]})})})),Mn=[{menuItem:"About",render:function(){return Object(i.jsx)(Pn,{})}},{menuItem:"Photos",render:function(){return Object(i.jsx)(kn,{})}},{menuItem:"Trainings",render:function(){return Object(i.jsx)(Dn,{})}},{menuItem:"Followers",render:function(){return Object(i.jsx)(zn,{})}},{menuItem:"Following",render:function(){return Object(i.jsx)(zn,{})}}],Fn=function(e){var t=e.setActiveTab;return Object(i.jsx)(gn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:Mn,onTabChange:function(e,n){return t(n.activeIndex)}})},Bn=Object(h.a)((function(e){var t=e.match,n=Object(r.useContext)(at),a=n.profileRepository,o=a.loadProfile,c=a.profile,s=a.loadingProfile,l=a.follow,u=a.unfollow,b=a.isCurrentUser,j=a.loading,d=a.setActiveTab,p=n.userRepository.isLoggedIn;return Object(r.useEffect)((function(){o(t.params.username)}),[o,t]),s?Object(i.jsx)(an,{content:"Loading Profile ..."}):Object(i.jsx)(Rt.a,{children:Object(i.jsxs)(Rt.a.Column,{width:16,children:[Object(i.jsx)(hn,{profile:c,follow:l,unfollow:u,isCurrentUser:b,loading:j,isLoggedIn:p}),Object(i.jsx)(Fn,{setActiveTab:d})]})})})),An=n(216),En=n.n(An),Nn=function(e){var t=e.location,n=En.a.parse(t.search).email;return Object(i.jsxs)(zt.a,{placeholder:!0,children:[Object(i.jsxs)(lt.a,{icon:!0,children:[Object(i.jsx)(d.a,{name:"check"}),"Successfully registred"]}),Object(i.jsx)(zt.a.Inline,{children:Object(i.jsxs)("div",{className:"centre",children:[Object(i.jsx)("p",{children:"Please check your email (including your junk folder) for the verification email"}),n&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("p",{children:"Didn't receive the mail please click the button below to resend "}),Object(i.jsx)(j.a,{onClick:function(){Je.resendEmailConfirm(n).then((function(){I.b.success("please check you email")})).catch((function(e){return console.log(e)}))},primary:!0,content:"Resend email",size:"huge"})]})]})})]})},Un=function(e){var t=e.location,n=Object(r.useContext)(at),a="Verifying",o="Failed",c="Success",s=function(){Je.resendEmailConfirm(f).then((function(){I.b.success("please check you email")})).catch((function(e){return console.log(e)}))},l=Object(r.useState)(a),u=Object(kt.a)(l,2),b=u[0],p=u[1],h=n.modalRepository.openModal,g=En.a.parse(t.search),O=g.token,f=g.email;Object(r.useEffect)((function(){Je.verifyEmail(O,f).then((function(){return p(c)})).catch((function(){return p(o)}))}),[o,c,O,f]);return Object(i.jsxs)(zt.a,{placeholder:!0,children:[Object(i.jsxs)(lt.a,{icon:!0,children:[Object(i.jsx)(d.a,{name:"envelope"}),"Email verification"]}),Object(i.jsx)(zt.a.Inline,{children:function(){switch(b){case a:return Object(i.jsx)("p",{children:"Verifying ..."});case o:return Object(i.jsxs)("div",{className:"center",children:["Verifying ...",Object(i.jsx)("p",{children:"Verifying fieled you can try resending email"}),Object(i.jsx)(j.a,{onClick:s,primary:!0,content:"Resend email",size:"huge"})]});case c:return Object(i.jsxs)("div",{className:"center",children:["Verifying ...",Object(i.jsx)("p",{children:"Verifying fieled you can try resending email"}),Object(i.jsx)(j.a,{onClick:function(){return h(Object(i.jsx)(yt,{}))},primary:!0,content:"Login",size:"large"})]})}}()})]})},Gn=function(){return Object(i.jsxs)(zt.a,{placeholder:!0,children:[Object(i.jsxs)(lt.a,{icon:!0,children:[Object(i.jsx)(d.a,{name:"search"}),"Oops hahaha"]}),Object(i.jsx)(zt.a.Inline,{children:Object(i.jsx)(j.a,{as:g.a,to:"/trainings/",primary:!0,children:"Return to Trainings Page..."})})]})},_n=n(617),Hn=Object(h.a)((function(){var e=Object(r.useContext)(at).modalRepository,t=e.closeModal,n=e.modal,a=n.open,o=n.body;return Object(i.jsx)(_n.a,{open:a,onClose:t,size:"mini",children:Object(i.jsx)(_n.a.Content,{children:o})})})),Vn=Object(c.f)(Object(h.a)((function(e){var t=e.location,n=Object(r.useContext)(at),a=n.commonRepository,o=a.token,l=a.setAppLoaded,u=a.appLoaded,b=n.userRepository.getUser;return Object(r.useEffect)((function(){o&&!u?b().finally((function(){return l()})):l()}),[b,u,o,l]),u?Object(i.jsxs)("div",{children:[Object(i.jsx)(Hn,{}),Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(I.a,{position:"bottom-right"}),Object(i.jsx)(Ct,{}),Object(i.jsx)(s.a,{style:{marginTop:"3em"},children:Object(i.jsxs)(c.c,{children:[Object(i.jsx)(c.a,{exact:!0,path:"/",component:Yt}),Object(i.jsx)(c.a,{exact:!0,path:"/trainings",component:Yt}),Object(i.jsx)(c.a,{exact:!0,path:["/createTraining","/manage/:id"],component:tn},t.key),Object(i.jsx)(c.a,{path:"/detailTraining/:id",component:jn}),Object(i.jsx)(c.a,{path:"/profile/:username",component:Bn}),Object(i.jsx)(c.a,{path:"/user/RegisterSuccess",component:Nn}),Object(i.jsx)(c.a,{path:"/user/VerifyEmail",component:Un}),Object(i.jsx)(c.a,{component:Gn})]})})]})]}):Object(i.jsx)(an,{content:"Loading app ..."})}))),qn=n(56);n(583),n(584),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Yn=n(339),Wn=n.n(Yn),Jn=Object(c.f)((function(e){var t=e.children,n=e.location.pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[n]),t}));Wn()();var Kn=Object(qn.a)();o.a.render(Object(i.jsx)(c.b,{history:Kn,children:Object(i.jsx)(Jn,{children:Object(i.jsx)(Vn,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[586,1,2]]]);
//# sourceMappingURL=main.f5a5ff65.chunk.js.map