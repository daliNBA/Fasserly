(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{410:function(e,t,n){e.exports=n(709)},415:function(e,t,n){},709:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Nn}));var a=n(0),r=n.n(a),i=n(27),o=n.n(i),c=n(34),l=(n(415),n(727)),u=n(399),s=n(146),m=n(721),p=n(710),b=n(74),d=n(400),g=n(24),f=n(29),h=[{key:"All",text:"All development",value:"0.0"},{key:"Web",text:"Web",value:"Web"},{key:"Game",text:"Game",value:"Game"},{key:"Mobil",text:"Mobil",value:"Mobil"},{key:"WebC",text:"Conception Web",value:"WebC"},{key:"Graphic",text:"Graphic Conception",value:"Graphic"},{key:"Animation",text:"Animation",value:"Animation"},{key:"3D",text:"3D",value:"3D"},{key:"Finance",text:"Finance",value:"Finance"},{key:"Entrepreneurship",text:"Entrepreneurship",value:"Entrepreneurship"},{key:"Gestion",text:"Gestion",value:"Gestion"}],E=n(53),y=n(22),O=n.n(y),v=n(32),w=n(398),j=n(14),C=n(116),k=n(10),R=(n(127),n(8)),x=n(66),P=n.n(x),T=n(36);P.a.defaults.baseURL="/api",P.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),P.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.messagge||e.response||T.b.error("Network error - make sure API is running!");var t=e.response,n=t.data,a=t.status,r=t.config,i=t.headers;throw e.response||T.b.error("Network error - Please check your connection "),404===a&&Nn.push("/notfound"),401===a&&i["www-authenticate"].startsWith('Bearer error="invalid_token"')&&(window.localStorage.removeItem("jwt"),Nn.push("/"),T.b.info("Your session is expired, please login again")),400===a&&"get"===r.method&&n.errors.hasOwnProperty("id")&&Nn.push("/notfound"),500===a&&T.b.error("server error - check the terminal for more info!"),e.response}));var I,z,L,S,D,M,A,B,F,N,U,G,_,H,Y,q,W,V,J,K,$,Q,X,Z,ee,te,ne,ae,re,ie,oe,ce,le,ue,se,me,pe,be,de,ge,fe,he,Ee,ye,Oe,ve,we,je,Ce,ke,Re,xe,Pe,Te,Ie,ze,Le,Se,De,Me,Ae,Be,Fe=function(e){return e.data},Ne=function(e){return P.a.get(e).then(Fe)},Ue=function(e,t){return P.a.post(e,t).then(Fe)},Ge=function(e,t){return P.a.put(e,t).then(Fe)},_e=function(e){return P.a.delete(e).then(Fe)},He=function(e,t){var n=new FormData;return n.append("File",t),P.a.post(e,n,{headers:{"content-type":"multipart/form-data"}}).then(Fe)},Ye={list:function(e){return P.a.get("/training",{params:e}).then(Fe)},details:function(e){return Ne("/training/".concat(e))},create:function(e){return Ue("/training",e)},update:function(e){return Ge("/training/".concat(e.trainingId),e)},delete:function(e){return _e("/training/".concat(e))},buy:function(e){return Ue("/training/".concat(e,"/buy"),{})},refund:function(e){return _e("/training/".concat(e,"/buy"))}},qe={current:function(){return Ne("/user")},login:function(e){return Ue("/user/login",e)},register:function(e){return Ue("/user/register",e)}},We={get:function(e){return Ne("/profile/".concat(e))},uploadPhoto:function(e){return He("/photo",e)},setMainPhoto:function(e){return Ue("/photo/".concat(e,"/setmain"),{})},deletePhoto:function(e){return _e("/photo/".concat(e))},editProfile:function(e){return Ge("/profile",e)},follow:function(e){return Ue("/profile/".concat(e,"/follow"),{})},unfollow:function(e){return _e("/profile/".concat(e,"/follow"))},listFollowings:function(e,t){return Ne("/profile/".concat(e,"/follow?predicate=").concat(t))},listTrainings:function(e,t){return Ne("/profile/".concat(e,"/trainings?predicate=").concat(t))}},Ve=function(e,t,n){return e.dateOfCreation=new Date(e.dateOfCreation),n&&(e.isBuyer=e.buyers.some((function(e){return e.username===t.username})),e.isOwner=e.buyers.some((function(e){return e.username===t.username&&e.isOwner}))),e},Je=function(e){return{displayName:e.displayName,isOwner:!1,username:e.username,image:e.image}},Ke=n(241),$e=(I=R.f.ref,z=function(){function e(t){var n=this;Object(E.a)(this,e),this._baseRepository=void 0,Object(j.a)(this,"training",L,this),Object(j.a)(this,"loading",S,this),Object(j.a)(this,"submitting",D,this),Object(j.a)(this,"trainingRegestry",M,this),Object(j.a)(this,"target",A,this),Object(j.a)(this,"loadingBuy",B,this),Object(j.a)(this,"hubConnection",F,this),Object(j.a)(this,"trainingCount",N,this),Object(j.a)(this,"page",U,this),Object(j.a)(this,"predicate",G,this),Object(j.a)(this,"setPredicate",_,this),Object(j.a)(this,"setPage",H,this),Object(j.a)(this,"createHubConnection",Y,this),Object(j.a)(this,"stopHubConnection",q,this),Object(j.a)(this,"addcomment",W,this),Object(j.a)(this,"loadTrainings",V,this),Object(j.a)(this,"createTraining",J,this),Object(j.a)(this,"editTraining",K,this),Object(j.a)(this,"deleteTraining",$,this),Object(j.a)(this,"loadTraining",Q,this),Object(j.a)(this,"buyTraining",X,this),Object(j.a)(this,"refundTraining",Z,this),Object(j.a)(this,"getTraining",ee,this),Object(j.a)(this,"selectTraining",te,this),Object(j.a)(this,"clearTraining",ne,this),this._baseRepository=t,Object(R.g)((function(){return n.predicate.keys()}),(function(){n.page=0,n.trainingRegestry.clear(),n.loadTrainings()}))}return Object(C.a)(e,[{key:"sortByDate",value:function(e){var t=e.sort((function(e,t){return e.dateOfCreation.getDate()-t.dateOfCreation.getDate()}));return Object.entries(t.reduce((function(e,t){var n=t.dateOfCreation.toISOString().split("T")[0];return e[n]=e[n]?[].concat(Object(w.a)(e[n]),[t]):[t],e}),{}))}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)})),e}},{key:"trainingByDate",get:function(){return this.sortByDate(Array.from(this.trainingRegestry.values()))}},{key:"totalPages",get:function(){return Math.ceil(this.trainingCount/2)}}]),e}(),L=Object(k.a)(z.prototype,"training",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=Object(k.a)(z.prototype,"loading",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Object(k.a)(z.prototype,"submitting",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=Object(k.a)(z.prototype,"trainingRegestry",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),A=Object(k.a)(z.prototype,"target",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=Object(k.a)(z.prototype,"loadingBuy",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(k.a)(z.prototype,"hubConnection",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(k.a)(z.prototype,"trainingCount",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Object(k.a)(z.prototype,"page",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Object(k.a)(z.prototype,"predicate",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),_=Object(k.a)(z.prototype,"setPredicate",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(k.a)(z.prototype,"axiosParams",[R.c],Object.getOwnPropertyDescriptor(z.prototype,"axiosParams"),z.prototype),Object(k.a)(z.prototype,"trainingByDate",[R.c],Object.getOwnPropertyDescriptor(z.prototype,"trainingByDate"),z.prototype),Object(k.a)(z.prototype,"totalPages",[R.c],Object.getOwnPropertyDescriptor(z.prototype,"totalPages"),z.prototype),H=Object(k.a)(z.prototype,"setPage",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),Y=Object(k.a)(z.prototype,"createHubConnection",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new Ke.a).withUrl("/chat",{accessTokenFactory:function(){return e._baseRepository.commonRepository.token}}).configureLogging(Ke.b.Information).build(),e.hubConnection.start().then((function(){return console.log(e.hubConnection.state)})).then((function(){console.log("Attempting to join group"),e.hubConnection.invoke("AddToGroup",t)})).catch((function(e){return console.log("Error estabilshed connection",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(R.h)((function(){e.training.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){T.b.info(e)}))}}}),q=Object(k.a)(z.prototype,"stopHubConnection",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.hubConnection.invoke("RemoveFromGroup",null===(t=e.training)||void 0===t?void 0:t.trainingId).then((function(){var t;null===(t=e.hubConnection)||void 0===t||t.stop()})).then((function(){return console.log("Connection stopped")})).catch((function(e){return console.log(e)})),e.hubConnection.stop()}}}),W=Object(k.a)(z.prototype,"addcomment",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.trainingId=null===(a=e.training)||void 0===a?void 0:a.trainingId,t.prev=1,t.next=4,e.hubConnection.invoke("SendComment",n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),V=Object(k.a)(z.prototype,"loadTrainings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(v.a)(O.a.mark((function t(){var n,a,r,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._baseRepository.userRepository.isLoggedIn,e.loading=!0,t.prev=2,t.next=5,Ye.list(e.axiosParams);case 5:a=t.sent,r=a.trainings,i=a.trainingCount,Object(R.h)("Loading",(function(){r.forEach((function(t){Ve(t,e._baseRepository.userRepository.user,n),e.trainingRegestry.set(t.trainingId,t),console.log(t.buyers)})),e.trainingCount=i,e.loading=!1})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),Object(R.h)("loading Error",(function(){console.log(t.t0),e.loading=!1}));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))}}),J=Object(k.a)(z.prototype,"createTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,Ye.create(n);case 4:(a=Je(e._baseRepository.userRepository.user)).isOwner=!0,(r=[]).push(a),n.buyers=r,n.isOwner=!0,n.comments=[],Object(R.h)("Creating training",(function(){e.trainingRegestry.set(n.trainingId,n),e.training=n,e.submitting=!1})),Nn.push("/detailTraining/".concat(n.trainingId)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),Object(R.h)("Creating training Error",(function(){e.submitting=!1,console.log(t.t0)})),T.b.error("Error submitting Data");case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}}),K=Object(k.a)(z.prototype,"editTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,Ye.update(n);case 4:Object(R.h)("editnig",(function(){e.trainingRegestry.set(n.trainingId,n),e.training=n,e.submitting=!1})),Nn.push("/detailTraining/".concat(n.trainingId)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(R.h)("edit Error",(function(){console.log(t.t0),e.submitting=!1})),T.b.error("Error submitting Data");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),$=Object(k.a)(z.prototype,"deleteTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n,a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,e.target=n.currentTarget.name,t.prev=2,t.next=5,Ye.delete(a);case 5:Object(R.h)((function(){e.trainingRegestry.delete(a),e.training=null,e.submitting=!1,e.target=""})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Object(R.h)((function(){console.log(t.t0),e.submitting=!1,e.target=""}));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),Q=Object(k.a)(z.prototype,"loadTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e._baseRepository.userRepository.isLoggedIn,!(r=e.getTraining(n))){t.next=7;break}return e.training=r,t.abrupt("return",r);case 7:return t.prev=7,e.loading=!0,t.next=11,Ye.details(n);case 11:r=t.sent,Object(R.h)("Loading",(function(){return Ve(r,e._baseRepository.userRepository.user,a),e.training=r,e.loading=!1,console.log(r),r})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Object(R.h)("Edit error",(function(){console.log(t.t0),e.loading=!1}));case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()}}),X=Object(k.a)(z.prototype,"buyTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(v.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Je(e._baseRepository.userRepository.user),e.loadingBuy=!0,t.prev=2,t.next=5,Ye.buy(e.training.trainingId);case 5:Object(R.h)((function(){e.training&&(e.training.buyers.push(n),e.training.isBuyer=!0,e.trainingRegestry.set(e.training.trainingId,e.training),e.loadingBuy=!1)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(R.h)((function(){e.loadingBuy=!1})),T.b.error("Problem buying course");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),Z=Object(k.a)(z.prototype,"refundTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBuy=!0,t.prev=1,t.next=4,Ye.refund(e.training.trainingId);case 4:Object(R.h)((function(){e.training&&(e.training.buyers=e.training.buyers.filter((function(t){return t.username!==e._baseRepository.userRepository.user.username})),e.training.isBuyer=!1,e.trainingRegestry.set(e.training.trainingId,e.training),e.loadingBuy=!1)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(R.h)((function(){e.loadingBuy=!1})),T.b.error("Problem buying course");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}}),ee=Object(k.a)(z.prototype,"getTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.trainingRegestry.get(t)}}}),te=Object(k.a)(z.prototype,"selectTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.training=e.trainingRegestry.get(t)}}}),ne=Object(k.a)(z.prototype,"clearTraining",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.training=null}}}),z),Qe=(ae=function(){function e(t){Object(E.a)(this,e),this._baseRepository=void 0,Object(j.a)(this,"user",re,this),Object(j.a)(this,"login",ie,this),Object(j.a)(this,"register",oe,this),Object(j.a)(this,"getUser",ce,this),Object(j.a)(this,"logout",le,this),this._baseRepository=t}return Object(C.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),re=Object(k.a)(ae.prototype,"user",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(k.a)(ae.prototype,"isLoggedIn",[R.c],Object.getOwnPropertyDescriptor(ae.prototype,"isLoggedIn"),ae.prototype),ie=Object(k.a)(ae.prototype,"login",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.login(n);case 3:a=t.sent,Object(R.h)((function(){e.user=a})),e._baseRepository.commonRepository.setToken(a.token),e._baseRepository.modalRepository.closeModal(),Nn.push("/trainings"),e._baseRepository.trainingsRepository.loadTrainings(),console.log(e.user),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}}),oe=Object(k.a)(ae.prototype,"register",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.register(n);case 3:a=t.sent,e._baseRepository.commonRepository.setToken(a.token),e._baseRepository.modalRepository.closeModal(),Object(R.h)((function(){e.user=a})),e._baseRepository.commonRepository.setToken(a.token),Nn.push("/trainings"),console.log(e.user),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}}),ce=Object(k.a)(ae.prototype,"getUser",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(v.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.current();case 3:n=t.sent,Object(R.h)((function(){e.user=n})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),le=Object(k.a)(ae.prototype,"logout",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e._baseRepository.commonRepository.setToken(null),e.user=null,e._baseRepository.trainingsRepository.loadTrainings()}}}),ae),Xe=(ue=function e(t){var n=this;Object(E.a)(this,e),this.baseRepository=void 0,Object(j.a)(this,"token",se,this),Object(j.a)(this,"appLoaded",me,this),Object(j.a)(this,"setToken",pe,this),Object(j.a)(this,"setAppLoaded",be,this),this.baseRepository=t,Object(R.g)((function(){return n.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},se=Object(k.a)(ue.prototype,"token",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),me=Object(k.a)(ue.prototype,"appLoaded",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=Object(k.a)(ue.prototype,"setToken",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),be=Object(k.a)(ue.prototype,"setAppLoaded",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),ue),Ze=(de=R.f.shallow,ge=function e(t){Object(E.a)(this,e),this.baseRepository=void 0,Object(j.a)(this,"modal",fe,this),Object(j.a)(this,"openModal",he,this),Object(j.a)(this,"closeModal",Ee,this),this.baseRepository=t},fe=Object(k.a)(ge.prototype,"modal",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),he=Object(k.a)(ge.prototype,"openModal",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),Ee=Object(k.a)(ge.prototype,"closeModal",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),ge),et=n(72),tt=(ye=function(){function e(t){var n=this;Object(E.a)(this,e),this.baseRepository=void 0,Object(j.a)(this,"profile",Oe,this),Object(j.a)(this,"loadingProfile",ve,this),Object(j.a)(this,"uploadingPhoto",we,this),Object(j.a)(this,"loading",je,this),Object(j.a)(this,"followings",Ce,this),Object(j.a)(this,"activeTab",ke,this),Object(j.a)(this,"userTrainings",Re,this),Object(j.a)(this,"loadingTraining",xe,this),Object(j.a)(this,"setActiveTab",Pe,this),Object(j.a)(this,"loadUserTrainings",Te,this),Object(j.a)(this,"loadProfile",Ie,this),Object(j.a)(this,"uploadPhoto",ze,this),Object(j.a)(this,"setMainPhoto",Le,this),Object(j.a)(this,"deletePhoto",Se,this),Object(j.a)(this,"editProfile",De,this),Object(j.a)(this,"follow",Me,this),Object(j.a)(this,"unfollow",Ae,this),Object(j.a)(this,"loadFollowings",Be,this),this.baseRepository=t,Object(R.g)((function(){return n.activeTab}),(function(e){if(3===e||4===e){var t=3===e?"followers":"followings";n.loadFollowings(t)}else n.followings=[]}))}return Object(C.a)(e,[{key:"isCurrentUser",get:function(){return!(!this.baseRepository.userRepository.user||!this.profile)&&this.baseRepository.userRepository.user.username===this.profile.username}}]),e}(),Oe=Object(k.a)(ye.prototype,"profile",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=Object(k.a)(ye.prototype,"loadingProfile",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),we=Object(k.a)(ye.prototype,"uploadingPhoto",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),je=Object(k.a)(ye.prototype,"loading",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=Object(k.a)(ye.prototype,"followings",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=Object(k.a)(ye.prototype,"activeTab",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=Object(k.a)(ye.prototype,"userTrainings",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=Object(k.a)(ye.prototype,"loadingTraining",[R.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(k.a)(ye.prototype,"isCurrentUser",[R.c],Object.getOwnPropertyDescriptor(ye.prototype,"isCurrentUser"),ye.prototype),Pe=Object(k.a)(ye.prototype,"setActiveTab",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),Te=Object(k.a)(ye.prototype,"loadUserTrainings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n,a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingTraining=!0,t.prev=1,t.next=4,We.listTrainings(n,a);case 4:r=t.sent,Object(R.h)((function(){e.userTrainings=r,e.loadingTraining=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),T.b.error("Problem Uploading photo!"),Object(R.h)((function(){e.loadingTraining=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),Ie=Object(k.a)(ye.prototype,"loadProfile",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,We.get(n);case 3:a=t.sent,Object(R.h)((function(){e.profile=a,e.loadingProfile=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(R.h)((function(){e.loadingProfile=!1})),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(k.a)(ye.prototype,"uploadPhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadingPhoto=!0,t.prev=1,t.next=4,We.uploadPhoto(n);case 4:a=t.sent,Object(R.h)((function(){e.profile&&(e.profile.photos.push(a),a.isMain&&e.baseRepository.userRepository.user&&(e.baseRepository.userRepository.user.image=a.url,e.profile.image=a.url,e.profile.image=a.url)),e.uploadingPhoto=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),T.b.error("Problem Uploading photo!"),Object(R.h)((function(){e.uploadingPhoto=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Le=Object(k.a)(ye.prototype,"setMainPhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,We.setMainPhoto(n.id);case 4:Object(R.h)((function(){e.baseRepository.userRepository.user.image=n.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===n.id})).isMain=!0,e.profile.image=n.url,e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),T.b.error("Problem setting photo as main!"),Object(R.h)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Se=Object(k.a)(ye.prototype,"deletePhoto",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,We.deletePhoto(n.id);case 4:Object(R.h)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==n.id})),e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),T.b.error("Problem deleting photo!"),Object(R.h)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),De=Object(k.a)(ye.prototype,"editProfile",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,We.editProfile(n);case 3:Object(R.h)((function(){n.displayName!==e.baseRepository.userRepository.user.displayName&&(e.baseRepository.userRepository.user.displayName=n.displayName),e.profile=Object(et.a)(Object(et.a)({},e.profile),n)})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),T.b.error("Problem updating profile"),Object(R.h)((function(){}));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Me=Object(k.a)(ye.prototype,"follow",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,We.follow(n);case 4:Object(R.h)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1,console.log(e.profile.followingsCount)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),T.b.error("Problem following user"),Object(R.h)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(k.a)(ye.prototype,"unfollow",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,We.unfollow(n);case 4:Object(R.h)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),T.b.error("Problem unfollowing user"),Object(R.h)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Be=Object(k.a)(ye.prototype,"loadFollowings",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,We.listFollowings(e.profile.username,n);case 4:a=t.sent,Object(R.h)((function(){e.followings=a,e.loading=!1})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(R.h)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ye);Object(R.d)({enforceActions:"always"});var nt=Object(a.createContext)(new function e(){Object(E.a)(this,e),this.trainingsRepository=void 0,this.userRepository=void 0,this.commonRepository=void 0,this.modalRepository=void 0,this.profileRepository=void 0,this.trainingsRepository=new $e(this),this.userRepository=new Qe(this),this.commonRepository=new Xe(this),this.modalRepository=new Ze(this),this.profileRepository=new tt(this)}),at=n(117),rt=n(30),it=n(729),ot=n(742),ct=n(145),lt=function(e){var t=e.input,n=e.width,a=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(it.a.Field,{error:c&&!!l,type:a,width:n},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(ct.a,{basic:!0,color:"red"},l))},ut=n(738),st=function(e){var t=e.error,n=e.text;return r.a.createElement(ut.a,{error:!0},r.a.createElement(ut.a.Header,null,t.statusText),t.data&&Object.keys(t.data.errors).length>0&&r.a.createElement(ut.a.List,null,Object.values(t.data.errors).flat().map((function(e,t){return r.a.createElement(ut.a.Item,{key:t},e)}))),n&&r.a.createElement(ut.a.Content,{content:n}))},mt=n(73),pt=n(41),bt=Object(pt.combineValidators)({email:Object(pt.isRequired)("email"),password:Object(pt.isRequired)("password")}),dt=function(){var e=Object(a.useContext)(nt).userRepository.login;return r.a.createElement(rt.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(at.a)({},mt.a,e)}))},validate:bt,render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.submitError,i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(it.a,{onSubmit:t,error:!0},r.a.createElement(ot.a,{as:"h2",content:"Login to Fasserly",color:"blue",textAlign:"center"}),r.a.createElement(rt.a,{name:"email",component:lt,placeholder:"Email"}),r.a.createElement(rt.a,{name:"password",component:lt,placeholder:"Password",type:"Password"}),a&&!c&&r.a.createElement(st,{error:a,text:401===a.status?" Unauthorized Invalid email or password":"unknown"}),r.a.createElement(p.a,{disabled:i&&!c||o,loading:n,color:"blue",content:"Login",fluid:!0}))}})},gt=Object(pt.combineValidators)({email:Object(pt.isRequired)("email"),username:Object(pt.isRequired)("username"),password:Object(pt.isRequired)("password")}),ft=function(){var e=Object(a.useContext)(nt).userRepository.register;return r.a.createElement(rt.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(at.a)({},mt.a,e)}))},validate:gt,render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.submitError,i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(it.a,{onSubmit:t,error:!0},r.a.createElement(ot.a,{as:"h2",content:"Sign Up to Fasserly",color:"blue",textAlign:"center"}),r.a.createElement(rt.a,{name:"username",component:lt,placeholder:"username"}),r.a.createElement(rt.a,{name:"diplayname",component:lt,placeholder:"diplay Name"}),r.a.createElement(rt.a,{name:"email",component:lt,placeholder:"Email"}),r.a.createElement(rt.a,{name:"password",component:lt,placeholder:"Password",type:"Password"}),a&&!c&&r.a.createElement(st,{error:a}),r.a.createElement(p.a,{disabled:i&&!c||o,loading:n,color:"blue",content:"Register",fluid:!0}))}})},ht=Object(g.a)((function(){var e=Object(a.useContext)(nt),t=e.userRepository,n=t.isLoggedIn,i=t.user,o=t.logout,c=e.modalRepository.openModal;return r.a.createElement("div",null,r.a.createElement(u.a,{pointing:!0},r.a.createElement(u.a.Item,{as:f.b,exact:!0,to:"/trainings",name:"home"},r.a.createElement("img",{src:"/assets/Logo.png",alt:"Logo",height:"30px",width:"30"})),r.a.createElement(s.a,{item:!0,simple:!0,text:"Categories",direction:"right",options:h}),r.a.createElement(u.a.Item,null,r.a.createElement(m.a,{icon:"search",placeholder:"Search...",position:"left"})),n&&i&&r.a.createElement(u.a.Item,null,r.a.createElement(p.a,{as:f.b,to:"/createTraining",content:"Create Training"})),r.a.createElement(u.a.Item,{position:"right"},r.a.createElement(p.a,{animated:"vertical",margin:"10"},r.a.createElement(p.a.Content,{hidden:!0},"Basket"),r.a.createElement(p.a.Content,{visible:!0},r.a.createElement(b.a,{name:"shop"})))),n&&i?r.a.createElement(u.a.Item,null,r.a.createElement(d.a,{avatar:!0,spaced:"right",src:i.image||"/assets/Logo.png"}),r.a.createElement(s.a,{pointing:"top right",text:i.displayName},r.a.createElement(s.a.Menu,null,r.a.createElement(s.a.Item,{as:f.a,to:"/profile/".concat(i.username),text:"My profile",icon:"user"}),r.a.createElement(s.a.Item,{onClick:o,text:"Logout",icon:"power"})))):r.a.createElement(u.a.Item,null,r.a.createElement("div",null,r.a.createElement(p.a,{onClick:function(){return c(r.a.createElement(dt,null))},basic:!0,color:"blue"},"Sign in"),r.a.createElement(p.a,{onClick:function(){return c(r.a.createElement(ft,null))},color:"red"},"Sign up")))))})),Et=n(46),yt=n(401),Ot=n(124),vt=n(725),wt=n(734),jt=n(242),Ct=n(744),kt=n(728),Rt=n(735),xt=n(733),Pt={borderColor:"orange",borderWidth:2},Tt=function(e){var t=e.buyers;return r.a.createElement(Rt.a,{horizontal:!0},t&&t.map((function(e){return r.a.createElement(Rt.a.Item,{key:e.username},r.a.createElement(xt.a,{header:e.displayName,trigger:r.a.createElement(d.a,{size:"mini",circular:!0,src:e.image||"/assets/user.jpg",bordered:!0,style:e.following?Pt:null})}))})))},It={filtre:"Brightness(50%)",marginBottom:3},zt=function(e){var t=e.training,n=t.buyers.filter((function(e){return e.isOwner}))[0],i=Object(a.useContext)(nt),o=i.trainingsRepository.buyTraining,c=i.userRepository.isLoggedIn;return r.a.createElement(jt.a.Group,null,r.a.createElement(jt.a,null,r.a.createElement(wt.a.Group,null,r.a.createElement(wt.a,null,r.a.createElement(wt.a.Image,{as:f.a,to:"/detailTraining/".concat(t.trainingId),src:"/assets/".concat(t.title,".jpg"),size:"medium",style:It}),r.a.createElement(wt.a.Content,null,r.a.createElement(wt.a.Header,{as:f.a,to:"/detailTraining/".concat(t.trainingId)},t.title),r.a.createElement(wt.a.Description,null,"Created By ",r.a.createElement(f.a,{to:"/profile/".concat(n.username)},r.a.createElement("strong",null,n.displayName))," "),r.a.createElement(wt.a.Description,null,r.a.createElement(Ct.a,{maxRating:5,defaultRating:3,icon:"star",size:"small"})),c&&t.isOwner&&r.a.createElement(wt.a.Description,null,r.a.createElement(ct.a,{basic:!0,color:"orange",content:"You are the trainer this activity"})),c&&t.isBuyer&&!t.isOwner&&r.a.createElement(wt.a.Description,null,r.a.createElement(ct.a,{basic:!0,color:"green",content:"You are going to this activity"})))))),r.a.createElement(jt.a,null,r.a.createElement(b.a,{name:"clock"})," ",Object(kt.a)(t.dateOfCreation,"h:mm a"),r.a.createElement("br",null),r.a.createElement("span",null,t.description)),c&&r.a.createElement(jt.a,{secondary:!0},r.a.createElement(Tt,{buyers:t.buyers})),!c||t.isOwner||t.isBuyer?r.a.createElement(jt.a,{clearing:!0,attached:"bottom"},r.a.createElement(p.a,{color:"teal",content:"Put to basket"})):r.a.createElement(jt.a,{clearing:!0,attached:"bottom"},r.a.createElement(p.a,{color:"teal",content:"Put to basket"}),r.a.createElement(p.a,{color:"orange",onClick:o,content:"Buy now"})))},Lt=Object(g.a)((function(){var e=Object(a.useContext)(nt).trainingsRepository.trainingByDate;return r.a.createElement(wt.a.Group,{divided:!0},r.a.createElement(a.Fragment,null,e.map((function(e){var t=Object(Et.a)(e,2),n=t[0],i=t[1];return r.a.createElement(a.Fragment,{key:n},r.a.createElement(ct.a,{size:"large",color:"blue"},Object(kt.a)(n,"eeee do MMMM")),r.a.createElement(wt.a.Group,null,i.map((function(e){return r.a.createElement(zt,{key:e.trainingId,training:e})}))))}))))})),St=n(192),Dt=Object(g.a)((function(){var e=Object(a.useContext)(nt).trainingsRepository,t=e.setPredicate,n=e.predicate;return r.a.createElement(a.Fragment,null,r.a.createElement(u.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(ot.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(u.a.Item,{active:0===n.size,onClick:function(){return t("all","true")},color:"blue",name:"all",content:"All Courses"}),r.a.createElement(u.a.Item,{active:n.has("isBuyer"),onClick:function(){return t("isBuyer","true")},color:"blue",name:"username",content:"My courses"}),r.a.createElement(u.a.Item,{active:n.has("isOwner"),onClick:function(){return t("isOwner","true")},color:"blue",name:"host",content:"I'm owner"})),r.a.createElement(ot.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(St.Calendar,{onChange:function(e){return t("startDate",e)},value:n.get("startDate")||new Date}))})),Mt=n(739),At=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(Mt.a,{fluid:!0,style:{marginTop:50}},r.a.createElement(jt.a.Group,null,r.a.createElement(jt.a,{style:{minHeight:110}},r.a.createElement(Mt.a,null,r.a.createElement(Mt.a.Header,{image:!0},r.a.createElement(Mt.a.Line,null),r.a.createElement(Mt.a.Line,null)),r.a.createElement(Mt.a.Paragraph,null,r.a.createElement(Mt.a.Line,null)))),r.a.createElement(jt.a,null,r.a.createElement(Mt.a,null,r.a.createElement(Mt.a.Line,null),r.a.createElement(Mt.a.Line,null))),r.a.createElement(jt.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(jt.a,{clearing:!0},r.a.createElement(Mt.a,null,r.a.createElement(Mt.a.Line,null),r.a.createElement(Mt.a.Line,null))))))},Bt=n(384),Ft=n.n(Bt),Nt=Object(g.a)((function(){var e=Object(a.useContext)(nt),t=e.trainingsRepository,n=t.loadTrainings,i=t.loading,o=t.setPage,c=t.page,l=t.totalPages,u=window.localStorage.getItem("jwt"),s=e.userRepository.isLoggedIn,m=Object(a.useState)(!1),p=Object(Et.a)(m,2),b=p[0],d=p[1];return Object(a.useEffect)((function(){n()}),[n]),r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{width:10},i&&0===c?r.a.createElement(At,null):r.a.createElement(Ft.a,{pageStart:0,loadMore:function(){d(!0),o(c+1),n().then((function(){return d(!1)}))},hasMore:!b&&c+1<l,initialLoad:!1},r.a.createElement(Lt,null))),s&&u&&r.a.createElement(yt.a.Column,{width:6},r.a.createElement(Dt,null)),r.a.createElement(yt.a.Column,{width:10},r.a.createElement(vt.a,{active:b})))})),Ut=n(194),Gt=function e(t){Object(E.a)(this,e),this.trainingId="",this.title="",this.language="",this.price="0",this.rating=0,this.dateOfCreation=new Date(Date.now()),this.updateDate=new Date(Date.now()),this.description="",this.isActive=!0,this.category="",Object.assign(this,t)},_t=n(385),Ht=function(e){var t=e.input,n=e.width,a=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(it.a.Field,{error:c&&!!l,width:n},r.a.createElement("textarea",Object.assign({rows:a},t,{placeholder:i})),c&&l&&r.a.createElement(ct.a,{basic:!0,color:"red"},l))},Yt=n(722),qt=function(e){var t=e.input,n=e.options,a=e.width,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(it.a.Field,{error:c&&!!l,width:a},r.a.createElement(Yt.a,{value:t.value,onChange:function(e,n){return t.onChange(n.value)},placeholder:i,options:n}),c&&l&&r.a.createElement(ct.a,{basic:!0,color:"red"},l))},Wt=function(e){var t=e.input,n=e.width,a=e.placeholder,i=e.date,o=void 0!==i&&i,c=e.meta,l=e.error;Object(Ut.a)(e,["input","width","placeholder","date","meta","error"]);return r.a.createElement(it.a.Field,{error:c&&!!l,width:n},r.a.createElement(St.DateTimePicker,{placeholder:a,value:t.value||null,date:o,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()}}),c&&l&&r.a.createElement(ct.a,{basic:!0,color:"red"},l))},Vt=Object(pt.combineValidators)({title:Object(pt.isRequired)({message:"title est obligatoir"}),category:Object(pt.isRequired)({message:"category est obligatoir"}),description:Object(pt.composeValidators)(Object(pt.isRequired)("description "),Object(pt.hasLengthGreaterThan)(10)({message:"au moin 10 charact\xe9res "}))(),price:Object(pt.isRequired)({message:"price est obligatoir"})}),Jt=Object(g.a)((function(e){var t=e.match,n=e.history,i=Object(a.useContext)(nt).trainingsRepository,o=i.submitting,c=i.loadTraining,l=i.createTraining,u=i.editTraining,s=Object(a.useState)(new Gt),m=Object(Et.a)(s,2),b=m[0],d=m[1],g=Object(a.useState)(!1),f=Object(Et.a)(g,2),E=f[0],y=f[1];Object(a.useEffect)((function(){t.params.id&&(y(!0),c(t.params.id).then((function(e){return d(new Gt(e))})).finally((function(){return y(!1)})))}),[c,t.params.id]);return r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{width:10},r.a.createElement(jt.a,{clearing:!0},r.a.createElement(rt.b,{validate:Vt,initialValues:b,onSubmit:function(e){console.log(e);var t=function(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r="".concat(t,"-").concat(n,"-").concat(a);return new Date(r)}(e.dateOfCreation),n=(e.date,e.time,Object(Ut.a)(e,["date","time"]));if(n.dateOfCreation=t,n.trainingId)u(n);else{var a=Object(et.a)(Object(et.a)({},n),{},{trainingId:Object(_t.v4)()});console.log(n),l(a)}},render:function(e){var t=e.handleSubmit,a=e.pristine;return r.a.createElement(it.a,{onSubmit:t,loading:E},r.a.createElement(rt.a,{component:lt,placeholder:"Title",name:"title",value:b.title}),r.a.createElement(rt.a,{component:Ht,rows:2,placeholder:"Description",name:"description",value:null===b||void 0===b?void 0:b.description}),r.a.createElement(rt.a,{placeholder:"Date",component:Wt,date:!0,name:"dateOfCreation",value:b.dateOfCreation}),r.a.createElement(rt.a,{component:lt,placeholder:"Price",name:"price",value:b.price}),r.a.createElement(rt.a,{component:qt,options:h,name:"category",value:null===b||void 0===b?void 0:b.category}),r.a.createElement(p.a.Group,{floated:"right"},r.a.createElement(p.a,{disabled:E,onClick:b.trainingId?function(){return n.push("/detailTraining/".concat(b.trainingId))}:function(){return n.push("/trainings")},floated:"right",type:"button"},"Cancel"),r.a.createElement(p.a.Or,null),r.a.createElement(p.a,{positive:!0,disabled:E||a,loading:o,floated:"right",type:"submit"},"Submit")))}}))))})),Kt=n(737),$t=n(741),Qt=function(e){var t=e.inverted,n=e.content;return r.a.createElement($t.a,{active:!0,inverted:t},r.a.createElement(vt.a,{content:n}))},Xt=n(382),Zt=function(e){var t=e.training;return r.a.createElement(Xt.a,null,r.a.createElement(jt.a,{attached:"top"},r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:1},r.a.createElement(b.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(yt.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(jt.a,null,r.a.createElement(yt.a,{verticalAlign:"middle"},r.a.createElement(yt.a.Column,{width:1},r.a.createElement(b.a,{size:"large",color:"teal",name:"calendar"})),r.a.createElement(yt.a.Column,{width:15},r.a.createElement("span",null,Object(kt.a)(t.dateOfCreation,"do MMMM YYYY")," at ",Object(kt.a)(t.dateOfCreation,"h:mm a"))))),r.a.createElement(jt.a,null,r.a.createElement(yt.a,{verticalAlign:"middle"},r.a.createElement(yt.a.Column,{width:1},r.a.createElement(b.a,{size:"large",color:"teal",name:"euro sign"})),r.a.createElement(yt.a.Column,{width:15},r.a.createElement("span",null,t.price)))))},en=Object(g.a)((function(e){var t=e.buyers;return r.a.createElement(a.Fragment,null,r.a.createElement(jt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t.length," ",1===t.length?"Person":"People"," participate"),r.a.createElement(jt.a,{attached:!0},r.a.createElement(Rt.a,{relaxed:!0,divided:!0},t.map((function(e){return r.a.createElement(wt.a,{key:e.username,style:{position:"relative"}},e.isOwner&&r.a.createElement(ct.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"the trainer"),r.a.createElement(d.a,{size:"tiny",src:e.image||"/assets/user.jpg"}),r.a.createElement(wt.a.Content,{verticalAlign:"middle"},r.a.createElement(wt.a.Header,{as:"h3"},r.a.createElement(f.a,{to:"/profile/".concat(e.username)},e.displayName)),e.following&&r.a.createElement(wt.a.Extra,{style:{color:"orange"}},"Following")))})))))})),tn=n(732),nn=n(736),an=Object(g.a)((function(){var e=Object(a.useContext)(nt),t=e.trainingsRepository,n=t.createHubConnection,i=t.stopHubConnection,o=t.addcomment,c=t.training,l=e.userRepository.isLoggedIn;return Object(a.useEffect)((function(){return n(c.trainingId),function(){i()}}),[n,i,c]),r.a.createElement(a.Fragment,null,r.a.createElement(jt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(ot.a,null,"Chat about this course")),r.a.createElement(jt.a,{attached:!0},r.a.createElement(tn.a.Group,null,c&&c.comments&&c.comments.map((function(e){return r.a.createElement(tn.a,{key:e.dateOfComment},r.a.createElement(tn.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(tn.a.Content,null,r.a.createElement(tn.a.Author,{as:f.a,to:"/profile/".concat(e.username)},e.diplayName),r.a.createElement(tn.a.Metadata,null,r.a.createElement("div",null,Object(nn.a)(e.dateOfComment,new Date))),r.a.createElement(tn.a.Text,null,e.body)))})),l&&r.a.createElement(rt.b,{onSubmit:o,render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.form;return r.a.createElement(it.a,{onSubmit:function(){return t().then((function(){return a.reset()}))}},r.a.createElement(rt.a,{name:"body",component:Ht,rows:2,placeholder:"Add you comment"}),r.a.createElement(p.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n}))}}))))})),rn=Object(g.a)((function(e){var t=e.match,n=e.history,i=Object(a.useContext)(nt).trainingsRepository,o=i.training,c=i.loadTraining,l=i.loading,u=(i.deleteTraining,i.refundTraining),s=i.buyTraining,m=i.loadingBuy;return Object(a.useEffect)((function(){c(t.params.id)}),[c,t.params.id,n]),l?r.a.createElement(Qt,{content:"Loading Training.."}):o?r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{width:10},r.a.createElement(Kt.a,{fluid:!0},r.a.createElement(d.a,{size:"tiny",src:"/assets/".concat(o.title,".jpg"),ui:!1}),r.a.createElement(Kt.a.Content,null,r.a.createElement(Kt.a.Header,null,null===o||void 0===o?void 0:o.title,r.a.createElement(ct.a.Group,{tag:!0},r.a.createElement(ct.a,{as:"a"},"\u20ac",null===o||void 0===o?void 0:o.price))),r.a.createElement(Kt.a.Meta,null,r.a.createElement("span",{className:"date"},Object(kt.a)(o.dateOfCreation,"do MMMM YYYY"))),r.a.createElement(Kt.a.Description,null,null===o||void 0===o?void 0:o.description)),o.isOwner?r.a.createElement(Kt.a.Content,{extra:!0},r.a.createElement(p.a,{as:f.a,to:"/manage/".concat(o.trainingId),color:"green"},"Edit"),r.a.createElement(p.a,{color:"red"},"Delete"),r.a.createElement(p.a,{onClick:function(){return n.push("/trainings")}}," Cancel")):o.isBuyer?r.a.createElement(Kt.a.Content,{extra:!0},r.a.createElement(p.a,{as:f.a,to:"/share/".concat(o.trainingId),color:"green"},"Share"),r.a.createElement(p.a,{as:f.a,to:"/favorite/".concat(o.trainingId),color:"red"},"favorites"),r.a.createElement(p.a,{loading:m,onClick:u}," Refund")):r.a.createElement(Kt.a.Content,{extra:!0},r.a.createElement(p.a,{loading:m,onClick:s,color:"green"},"Purchase now"),r.a.createElement(p.a,{as:f.a,to:"/basket/".concat(o.trainingId),color:"teal"},"Put to basket"),r.a.createElement(p.a,{onClick:function(){return n.push("/trainings")}}," Cancel"))),r.a.createElement(Zt,{training:o}),r.a.createElement(an,null)),r.a.createElement(Ot.a,{width:6},r.a.createElement(en,{buyers:o.buyers}))):r.a.createElement("h1",null,"srf")})),on=n(740),cn=n(726),ln=n(745),un=Object(g.a)((function(e){var t=e.profile,n=e.follow,a=e.unfollow,i=e.loading,o=e.isCurrentUser,c=e.isLoggedIn;return r.a.createElement(jt.a,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:12},r.a.createElement(wt.a.Group,null,r.a.createElement(wt.a,null,r.a.createElement(wt.a.Image,{avatar:!0,size:"small",src:t.image||"/assets/user.jpg"}),r.a.createElement(wt.a.Content,{verticalAlign:"middle"},r.a.createElement(ot.a,{as:"h1"},t.displayName))))),r.a.createElement(yt.a.Column,{width:4},r.a.createElement(on.a.Group,{widths:2},r.a.createElement(on.a,{label:"Followers",value:t.followersCount}),r.a.createElement(on.a,{label:"Following",value:t.followingsCount})),r.a.createElement(cn.a,null),!o&&c&&r.a.createElement(ln.a,{animated:"move"},r.a.createElement(ln.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(p.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not following"})),r.a.createElement(ln.a.Content,{hidden:!0},r.a.createElement(p.a,{loading:i,fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",onClick:t.following?function(){return a(t.username)}:function(){return n(t.username)}}))))))})),sn=n(746),mn=n(397),pn={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},bn={borderColor:"green"},dn=function(e){var t=e.setFiles,n=Object(a.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),i=Object(mn.a)({onDrop:n}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(et.a)(Object(et.a)({},pn),bn):pn}),r.a.createElement("input",c()),r.a.createElement(b.a,{name:"upload",size:"huge"}),r.a.createElement(ot.a,{content:"Drop image here"}))},gn=n(387),fn=n.n(gn),hn=(n(646),function(e){var t=e.setImage,n=e.imagePreview,i=Object(a.useRef)(null);return r.a.createElement(fn.a,{ref:i,src:n,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){i.current&&"undefined"===typeof i.current.getCroppedCanvas()||i&&i.current&&i.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}),En=Object(g.a)((function(e){var t=e.loading,n=e.uploadPhoto,i=Object(a.useState)([]),o=Object(Et.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(null),s=Object(Et.a)(u,2),m=s[0],b=s[1];return Object(a.useEffect)((function(){return function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}})),r.a.createElement(a.Fragment,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:4},r.a.createElement(ot.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement(dn,{setFiles:l})),r.a.createElement(yt.a.Column,{width:1}),r.a.createElement(yt.a.Column,{width:4},r.a.createElement(ot.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),c.length>0&&r.a.createElement(hn,{setImage:b,imagePreview:c[0].preview})),r.a.createElement(yt.a.Column,{width:1}),r.a.createElement(yt.a.Column,{width:4},r.a.createElement(ot.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),c.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),r.a.createElement(p.a.Group,{widths:2},r.a.createElement(p.a,{positive:!0,icon:"check",loading:t,onClick:function(){return n(m)}}),r.a.createElement(p.a,{negative:!0,icon:"close",disabled:t,onClick:function(){return l([])}}))))))})),yn=Object(g.a)((function(){var e=Object(a.useContext)(nt).profileRepository,t=e.profile,n=e.isCurrentUser,i=e.uploadPhoto,o=e.uploadingPhoto,c=e.setMainPhoto,l=e.deletePhoto,u=e.loading,s=Object(a.useState)(!1),m=Object(Et.a)(s,2),b=m[0],g=m[1],f=Object(a.useState)(void 0),h=Object(Et.a)(f,2),E=h[0],y=h[1],O=Object(a.useState)(void 0),v=Object(Et.a)(O,2),w=v[0],j=v[1];return r.a.createElement(sn.a.Pane,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(ot.a,{floated:"left",icon:"image",content:"Photos"}),n&&r.a.createElement(p.a,{onClick:function(){return g(!b)},floated:"right",basic:!0,content:b?"Cancel":"Add Photo"})),r.a.createElement(yt.a.Column,{width:16},b?r.a.createElement(En,{uploadPhoto:function(e){i(e).then((function(){return g(!1)}))},loading:o}):r.a.createElement(Kt.a.Group,{itemsPerRow:5},t&&t.photos.map((function(e){return r.a.createElement(Kt.a,{key:e.id},r.a.createElement(d.a,{src:e.url}),n&&r.a.createElement(p.a.Group,{fluid:!0,widths:2},r.a.createElement(p.a,{onClick:function(t){c(e),y(t.currentTarget.name)},name:e.id,disabled:e.isMain,loading:u&&E===e.id,basic:!0,positive:!0,content:"Main"}),r.a.createElement(p.a,{name:e.id,disabled:e.isMain,onClick:function(t){l(e),j(t.currentTarget.name)},loading:u&&w===e.id,basic:!0,negative:!0,icon:"trash"})))}))))))})),On=Object(pt.combineValidators)({displayName:Object(pt.isRequired)("displayName")}),vn=Object(g.a)((function(e){var t=e.editProfile,n=e.profile;return r.a.createElement(rt.b,{onSubmit:t,validate:On,initialValues:n,render:function(e){var t=e.handleSubmit,a=e.invalid,i=e.pristine,o=e.submitting;return r.a.createElement(it.a,{onSubmit:t,error:!0},r.a.createElement(rt.a,{name:"displayName",component:lt,placeholder:"Display Name",value:n.displayName}),r.a.createElement(rt.a,{name:"bio",component:Ht,rows:3,placeholder:"Bio",value:n.bio}),r.a.createElement(p.a,{loading:o,floated:"right",disabled:a||i,positive:!0,content:"Update profile"}))}})})),wn=Object(g.a)((function(){var e=Object(a.useContext)(nt).profileRepository,t=e.isCurrentUser,n=e.profile,i=e.editProfile,o=Object(a.useState)(!1),c=Object(Et.a)(o,2),l=c[0],u=c[1];return r.a.createElement(sn.a.Pane,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(ot.a,{floated:"left",icon:"address card",content:"About ".concat(n.displayName)}),t&&r.a.createElement(p.a,{onClick:function(){return u(!l)},floated:"right",basic:!0,content:l?"Cancel":"Edit Profile"})),r.a.createElement(yt.a.Column,{width:16},l?r.a.createElement(vn,{editProfile:i,profile:n}):r.a.createElement(Rt.a,null,r.a.createElement(Rt.a.Item,null,r.a.createElement(Rt.a.Icon,{name:"marker"}),r.a.createElement(Rt.a.Content,null,n.bio)),r.a.createElement(Rt.a.Item,null,r.a.createElement(Rt.a.Icon,{name:"mail"}),r.a.createElement(Rt.a.Content,null,n.email))))))})),jn=function(e){var t=e.following;return r.a.createElement(Kt.a,{as:f.a,to:"/profile/".concat(t.username)},r.a.createElement(d.a,{src:t.image||"/assets/user.jpg"}),r.a.createElement(Kt.a.Content,null,r.a.createElement(Kt.a.Header,null,t.displayName)),r.a.createElement(Kt.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(b.a,{name:"user"}),t.followersCount," followers")))},Cn=function(){var e=Object(a.useContext)(nt).profileRepository,t=e.profile,n=e.followings,i=e.loading,o=e.activeTab;return r.a.createElement(sn.a.Pane,{loading:i},r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:16},r.a.createElement(ot.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})),r.a.createElement(yt.a.Column,{width:16},r.a.createElement(Kt.a.Group,{itemsPerRow:5},n.map((function(e){return r.a.createElement(jn,{key:e.username,following:e})}))))))},kn=[{menuItem:"Owining",pane:{key:"owned"}}],Rn=[{menuItem:"Owining",pane:{key:"owned"}},{menuItem:"Past Courses",pane:{key:"pastCourses"}},{menuItem:"Future Courses",pane:{key:"futureCourses"}}],xn=Object(g.a)((function(){var e=Object(a.useContext)(nt),t=e.profileRepository,n=t.loadUserTrainings,i=t.profile,o=t.loadingTraining,c=t.userTrainings,l=e.userRepository.isLoggedIn;Object(a.useEffect)((function(){n(i.username,"owning")}),[n,i]);return r.a.createElement(sn.a.Pane,{loading:o},r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:16},r.a.createElement(ot.a,{floated:"left",icon:"book",content:"Trainings"})),r.a.createElement(yt.a.Column,{width:16},r.a.createElement(sn.a,{panes:l?Rn:kn,menu:{secondary:!0,pointing:!0},onTabChange:function(e,t){return function(e,t){var a;switch(t.activeIndex){case 1:a="past";break;case 2:a="future";break;default:a="owning"}n(i.username,a)}(0,t)}}),r.a.createElement("br",null),r.a.createElement(Kt.a.Group,{itemsPerRow:4},c.map((function(e){return r.a.createElement(Kt.a,{as:f.a,to:"/training/".concat(e.id),key:e.id},r.a.createElement(d.a,{src:"/assets/".concat(e.title,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(Kt.a.Content,null,r.a.createElement(Kt.a.Header,{textAlign:"center"},e.title),r.a.createElement(Kt.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(kt.a)(new Date(e.date),"do LLL")),r.a.createElement("div",null,Object(kt.a)(new Date(e.date),"h:mm a")))))}))))))})),Pn=[{menuItem:"About",render:function(){return r.a.createElement(wn,null)}},{menuItem:"Photos",render:function(){return r.a.createElement(yn,null)}},{menuItem:"Trainings",render:function(){return r.a.createElement(xn,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(Cn,null)}},{menuItem:"Following",render:function(){return r.a.createElement(Cn,null)}}],Tn=function(e){var t=e.setActiveTab;return r.a.createElement(sn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:Pn,onTabChange:function(e,n){return t(n.activeIndex)}})},In=Object(g.a)((function(e){var t=e.match,n=Object(a.useContext)(nt),i=n.profileRepository,o=i.loadProfile,c=i.profile,l=i.loadingProfile,u=i.follow,s=i.unfollow,m=i.isCurrentUser,p=i.loading,b=i.setActiveTab,d=n.userRepository.isLoggedIn;return Object(a.useEffect)((function(){o(t.params.username)}),[o,t]),l?r.a.createElement(Qt,{content:"Loading Profile ..."}):r.a.createElement(yt.a,null,r.a.createElement(yt.a.Column,{width:16},r.a.createElement(un,{profile:c,follow:u,unfollow:s,isCurrentUser:m,loading:p,isLoggedIn:d}),r.a.createElement(Tn,{setActiveTab:b})))})),zn=function(){return r.a.createElement(jt.a,{placeholder:!0},r.a.createElement(ot.a,{icon:!0},r.a.createElement(b.a,{name:"search"}),"Oops hahaha"),r.a.createElement(jt.a.Inline,null,r.a.createElement(p.a,{as:f.a,to:"/trainings/",primary:!0},"Return to Trainings Page...")))},Ln=n(730),Sn=Object(g.a)((function(){var e=Object(a.useContext)(nt).modalRepository,t=e.closeModal,n=e.modal,i=n.open,o=n.body;return r.a.createElement(Ln.a,{open:i,onClose:t,size:"mini"},r.a.createElement(Ln.a.Content,null,o))})),Dn=Object(c.f)(Object(g.a)((function(e){var t=e.location,n=Object(a.useContext)(nt),i=n.commonRepository,o=i.token,u=i.setAppLoaded,s=i.appLoaded,m=n.userRepository.getUser;return Object(a.useEffect)((function(){o?m().finally((function(){return u()})):u()})),s?r.a.createElement("div",null,r.a.createElement(Sn,null),r.a.createElement(a.Fragment,null,r.a.createElement(T.a,{position:"bottom-right"}),r.a.createElement(ht,null),r.a.createElement(l.a,{style:{marginTop:"3em"}},r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:Nt}),r.a.createElement(c.a,{exact:!0,path:"/trainings",component:Nt}),r.a.createElement(c.a,{key:t.key,exact:!0,path:["/createTraining","/manage/:id"],component:Jt}),r.a.createElement(c.a,{path:"/detailTraining/:id",component:rn}),r.a.createElement(c.a,{path:"/profile/:username",component:In}),r.a.createElement(c.a,{component:zn}))))):r.a.createElement(Qt,{content:"Loading app ..."})}))),Mn=n(54);n(678),n(679),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var An=n(396),Bn=n.n(An),Fn=Object(c.f)((function(e){var t=e.children,n=e.location.pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[n]),t}));Bn()();var Nn=Object(Mn.a)();o.a.render(r.a.createElement(c.b,{history:Nn},r.a.createElement(Fn,null,r.a.createElement(Dn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[410,1,2]]]);
//# sourceMappingURL=main.35bd8f9a.chunk.js.map